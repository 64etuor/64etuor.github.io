<!DOCTYPE html> <html lang="en"><head>
<title>🌐 악명 높은 CORS 개념 &amp; 해결법 - 정리 끝판왕 👏</title>
<base href="../..">
<meta name="pathname" content="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html">
<meta name="description" content="악명 높은 CORS 에러 메세지 웹 개발을 하다보면 반드시 마주치는 멍멍 같은 에러가 바로 CORS 이다. 웹 개발의 신입 신고식이라고 할 정도로, CORS는 누구나 한 번 정도는 겪게 된다고 해도 과언이 아니다. 프론트엔드 개발자 입장에선 요청 코드를 이상하게 적은것도 아니고, 백엔드 개발자 입장에선 서버 코드나 세팅이 이상한것도 아니다. 모든게 멀쩡한데 왜 요청한 자료에 대한 응답을 시뻘건 에러줄로 확답하는게 문제이다. 🤬 이러한 현상이 일어나는 이유는, 웹 브라우저는 HTTP 요청에 대해서 어떤 요청을 하느냐에 따라 각기 다른 특징을 가지고 있기 때문이다. 요청 방식에 따라 다른 CORS 발생 여부 1. , , 2. XMLHttpRequest, Fetch API 스크립트 → 기본적으로 Same-Or..">
<meta property="og:title" content="🌐 악명 높은 CORS 개념 &amp; 해결법 - 정리 끝판왕 👏">
<meta property="og:description" content="악명 높은 CORS 에러 메세지 웹 개발을 하다보면 반드시 마주치는 멍멍 같은 에러가 바로 CORS 이다. 웹 개발의 신입 신고식이라고 할 정도로, CORS는 누구나 한 번 정도는 겪게 된다고 해도 과언이 아니다. 프론트엔드 개발자 입장에선 요청 코드를 이상하게 적은것도 아니고, 백엔드 개발자 입장에선 서버 코드나 세팅이 이상한것도 아니다. 모든게 멀쩡한데 왜 요청한 자료에 대한 응답을 시뻘건 에러줄로 확답하는게 문제이다. 🤬 이러한 현상이 일어나는 이유는, 웹 브라우저는 HTTP 요청에 대해서 어떤 요청을 하느냐에 따라 각기 다른 특징을 가지고 있기 때문이다. 요청 방식에 따라 다른 CORS 발생 여부 1. , , 2. XMLHttpRequest, Fetch API 스크립트 → 기본적으로 Same-Or..">
<meta property="og:type" content="website">
<meta property="og:url" content="./https://64etuor.github.io/600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html">
<meta property="og:image" content="https://blog.kakaocdn.net/dn/6p7bn/btrqLUBlJJT/oO0OJTezjbllLqHy48kXO0/img.png">
<meta name="author" content="[[인파_]]"></head><body class="publish css-settings-manager styled-scrollbars show-inline-title show-ribbon is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><meta charset="UTF-8"><meta property="og:site_name" content="Obsidian"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="./https://64etuor.github.io/site-lib/rss.xml"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-wasm-script" src="site-lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="site-lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.png"><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="stylesheet" href="site-lib/styles/theme.css"><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/supported-plugins.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:calc(2.3em + 2 * var(--sidebar-margin));width:var(--sidebar-width);padding:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row;border-top-right-radius:var(--radius-l)}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse;border-top-left-radius:var(--radius-l)}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:1px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#navbar:not(:empty){display:flex;align-items:center;justify-content:space-between;padding:.5em 1em;width:100%}#main{display:flex;flex-direction:column;height:100%;width:100%;align-items:stretch;justify-content:center}#main-horizontal{display:flex;flex-direction:row;flex-grow:1;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6,li):has(> :is(.math,table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const n=await fetch(e);if(!n.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await n.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let n=document.createRange().createContextualFragment(o);t.before(n),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(n){let l=o[n],c=n+1;l?(l&&"true"!=l.getAttribute("loaded")||n<o.length&&e(c),n<o.length&&l.addEventListener("load",(()=>e(c)))):n<o.length?e(c):t()}(0)}</script><div id="main"><div id="navbar"></div><div id="main-horizontal"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><div id="search-container"><div id="search-wrapper"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div aria-label="Clear search" id="search-clear-button"></div></div></div></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings allow-fold-lists show-indentation-guide show-properties" data-type="markdown"><style id="MJX-CHTML-styles"></style><pre class="frontmatter language-yaml" style="display: none;"><code class="language-yaml is-loaded"><span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">"🌐 악명 높은 CORS 개념 &amp; 해결법 - 정리 끝판왕 👏"</span>
<span class="token key atrule">source</span><span class="token punctuation">:</span> <span class="token string">"https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-CORS-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95-%F0%9F%91%8F"</span>
<span class="token key atrule">author</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">"[[인파_]]"</span>
<span class="token key atrule">published</span><span class="token punctuation">:</span> <span class="token datetime number">2022-11-28</span>
<span class="token key atrule">created</span><span class="token punctuation">:</span> <span class="token datetime number">2025-02-18</span>
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">"악명 높은 CORS 에러 메세지 웹 개발을 하다보면 반드시 마주치는 멍멍 같은 에러가 바로 CORS 이다. 웹 개발의 신입 신고식이라고 할 정도로, CORS는 누구나 한 번 정도는 겪게 된다고 해도 과언이 아니다. 프론트엔드 개발자 입장에선 요청 코드를 이상하게 적은것도 아니고, 백엔드 개발자 입장에선 서버 코드나 세팅이 이상한것도 아니다. 모든게 멀쩡한데 왜 요청한 자료에 대한 응답을 시뻘건 에러줄로 확답하는게 문제이다. 🤬 이러한 현상이 일어나는 이유는, 웹 브라우저는 HTTP 요청에 대해서 어떤 요청을 하느냐에 따라 각기 다른 특징을 가지고 있기 때문이다. 요청 방식에 따라 다른 CORS 발생 여부 1. , , 2. XMLHttpRequest, Fetch API 스크립트 → 기본적으로 Same-Or.."</span>
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">"clippings"</span></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="🌐_악명_높은_CORS_개념_&amp;_해결법_-_정리_끝판왕_👏_0">🌐 악명 높은 CORS 개념 &amp; 해결법 - 정리 끝판왕 👏</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-p"><p dir="auto"><img alt="cors-에러-정리" src="https://blog.kakaocdn.net/dn/6p7bn/btrqLUBlJJT/oO0OJTezjbllLqHy48kXO0/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">웹 개발을 하다보면 반드시 마주치는 멍멍 같은 에러가 바로 CORS 이다. 웹 개발의 신입 신고식이라고 할 정도로, CORS는 누구나 한 번 정도는 겪게 된다고 해도 과언이 아니다.</p></div><div class="el-p"><p dir="auto"><img alt="cors-에러-정리" src="https://blog.kakaocdn.net/dn/OsbIC/btrZlYpLyoy/H2ShaWCggxM2MVwg7UuLPk/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">프론트엔드 개발자 입장에선 요청 코드를 이상하게 적은것도 아니고, 백엔드 개발자 입장에선 서버 코드나 세팅이 이상한것도 아니다. 모든게 멀쩡한데 왜 요청한 자료에 대한 응답을 시뻘건 에러줄로 확답하는게 문제이다. 🤬</p></div><div class="el-p"><p dir="auto"><img alt="cors-에러-정리" src="https://blog.kakaocdn.net/dn/bfhqR2/btr5nGCLvgh/jP6KGvuFrXSKcxhVd8csn0/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">이러한 현상이 일어나는 이유는, 웹 브라우저는 HTTP 요청에 대해서 어떤 요청을 하느냐에 따라 <strong>각기 다른 특징</strong>을 가지고 있기 때문이다.</p></div><div class="el-hr"><hr></div><div class="el-h3"><h3 data-heading="**요청 방식에 따라 다른 CORS 발생 여부**" dir="auto" class="heading" id="**요청_방식에_따라_다른_CORS_발생_여부**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>요청 방식에 따라 다른 CORS 발생 여부</strong></h3></div><div class="el-h4"><h4 data-heading="**1\. <img>, <video>, <script>, <link> 태그 등**" dir="auto" class="heading" id="**1\._<img>,_<video>,_<script>,_<link>_태그_등**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>1. <img referrerpolicy="no-referrer">, <video>, </video></strong></h4></div><div class="el-p"><p dir="auto">&nbsp;→ 기본적으로&nbsp;Cross-Origin&nbsp;정책을 지원함</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><del></del> 태그의 href 에서 다른 사이트의 .css 리소스에 접근하는 것이 가능</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><del><img referrerpolicy="no-referrer"></del> 태그의 src 에서 다른 사이트의 .png, .jpg 등의 리소스에 접근하는 것이 가능</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span><del></del></li></ul></div><div class="el-p"><p dir="auto">html</p></div><div class="el-pre"><pre><code data-line="0">&lt;link rel="stylesheet" href="…" /&gt;
&lt;script src="…"&gt;&lt;/script&gt;
&lt;img src="…" /&gt;
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="**2\. XMLHttpRequest, Fetch API 스크립트**" dir="auto" class="heading" id="**2\._XMLHttpRequest,_Fetch_API_스크립트**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>2. XMLHttpRequest, Fetch API 스크립트</strong></h4></div><div class="el-p"><p dir="auto">&nbsp;→ 기본적으로&nbsp;Same-Origin&nbsp;정책을 따름</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>다른 도메인의 소스에 대해 자바스크립트 ajax 요청 API 호출시</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>웹 폰트 CSS 파일 내 @font-face에서 다른 도메인의 폰트 사용 시</li>
</ul></div><div class="el-p"><p dir="auto">자바스크립트에서의 요청은 기본적으로 <strong>서로 다른 도메인에 대한 요청을 보안상 제한</strong>한다. 브라우저는 기본으로 하나의 서버 연결만 허용되도록 설정되어 있기 때문이다. (주로 자신의 서버)</p></div><div class="el-p"><p dir="auto">처음 보는 용어가 나온다.&nbsp;Same Origin 정책과&nbsp;Cross Origin 정책이란 대체 무슨 정책(Policy)을 말하는 것일까?&nbsp;이러한 정책들이 뭐길래 웹 브라우저가 외부 리소스를 가려서 받는 것일까?&nbsp;</p></div><div class="el-p"><p dir="auto">바로 이&nbsp;Same Origin / Cross Origin 정책의 정보 부족으로 인해 나도모르게 정책을 위반하는 행동을 하게 되어 CORS 에러가 나타나는 것이다.&nbsp;</p></div><div class="el-p"><p dir="auto">요청 방식에 따라 다른 CORS 발생 여부를 좀 더 이해하기 쉽게 아래 html 코드를 직접 작성하고 테스트 해보자. 똑같은 서버 도메인으로 부터 check.svg 이미지를 가져오는데, 각각 <del><img referrerpolicy="no-referrer"></del> 태그의 src 속성으로 가져오는 방식과 자바스크립트에서 ajax 요청으로 가져오는 방식이다.</p></div><div class="el-p"><p dir="auto">html</p></div><div class="el-pre"><pre><code data-line="0">&lt;body&gt;
    &lt;img src="https://third-party-test.glitch.me/check.svg" alt="이미지"&gt;

    &lt;script&gt;
        fetch('https://third-party-test.glitch.me/check.svg')
            .then(response =&gt; response.blob())
            .then(imgBlob =&gt; {
                const imageObjectURL = URL.createObjectURL(imgBlob); // 응답 받은 이미지를 blob 객체로 변환
                const img = document.createElement('img'); // 이미지 태그를 생성하고
                img.src = imageObjectURL; // 이미지 경로를 설정한뒤
                document.body.append(img); // html에 추가
            })
    &lt;/script&gt;
&lt;/body&gt;
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">페이지 결과를 보면 이미지가 하나만 나타나는 걸 볼 수 있을 것이다.</p></div><div class="el-p"><p dir="auto"><img alt="cors-에러-정리" src="https://blog.kakaocdn.net/dn/dh4u45/btrZmDeREuj/bYgSHgKwDQ34su2CGe7Aik/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">브라우저 개발자 도구의 Network 창을 보면 check.svg 이미지에 대해서 두번 요청은 했지만 자바스크립트 fetch Type으로 요청한 것이 Status가 CORS error 임을 볼수가 있다.</p></div><div class="el-p"><p dir="auto"><img alt="cors-에러-정리" src="https://blog.kakaocdn.net/dn/bIQ43f/btrZlYXDbUh/Rhyp4urJMHybbbuw3AIE40/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">웹 개발을 하다보면 다른 도메인 서버에 있는 자원을 정말 자주 가져다 쓰거나 혹은 제공해 줄 텐데 이러한 기반 지식이 없다면 나중에 큰 걸림돌이 되게 된다. 지금부터 이 짜증나는 CORS를 두번 다시 마주치지 않도록 완벽하게 정복하러 가보자 ❗</p></div><div class="el-hr"><hr></div><div class="el-h2"><h2 data-heading="**CORS 에러 한방 이해하기**" dir="auto" class="heading" id="**CORS_에러_한방_이해하기**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>CORS 에러 한방 이해하기</strong></h2></div><div class="el-p"><p dir="auto">CORS는 함축 단어로써 이를 풀면 Cross-Origin Resource Sharing 이라는 단어로 이루어 져 있다. 이 문장을 직역하면 "교차 출처 리소스 공유 정책"이라고 해석할 수 있는데, 여기서 <strong>교차 출처</strong>라고 하는 것은 <strong>(엇갈린) 다른 출처</strong>를 의미하는 것으로 보면 된다.</p></div><div class="el-p"><p dir="auto"><img alt="cors-에러-정리" src="https://blog.kakaocdn.net/dn/deIesB/btrRMEdLoHJ/R2IT3LfpS2qdmsQzbTaxl1/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">CORS가 무얼 뜻하는지 알았으니, 한번 우리를 괴롭히는 악명 높은 CORS 에러 메세지를 차근차근 해석해보자.</p></div><div class="el-p"><p dir="auto"><strong>Warning !</strong></p></div><div class="el-p"><p dir="auto"><code>       Access to fetch at ‘https://myhompage.com’ from origin ‘http://localhost:3000’ has been blocked by CORS policy: No ‘Access-Control-Allow-Origin’ header is present on the requested resource. If an opaque response serves your needs, set the request’s mode to ‘no-cors’ to fetch the resource with CORS disabled.     </code></p></div><div class="el-p"><p dir="auto">'<a data-tooltip-position="top" aria-label="https://myhomepage.com'%EC%97%90%EC%84%9C" rel="noopener nofollow" class="external-link is-unresolved" href="https://myhomepage.com'%EC%97%90%EC%84%9C" target="_self">https://myhomepage.com'에서</a> 'https://localhost:3000' 출처로 가져올 수 있는 액세스가 CORS 정책에 의해 차단되었습니다. 요청된 리소스에 'Access-Control-Allow-Origin' 헤더가 없습니다. 불투명한 응답이 필요에 적합한 경우, 요청 모드를 'no-cors'로 설정하여 CORS가 비활성화된 리소스를 가져오십시오.</p></div><div class="el-p"><p dir="auto">에러 메세지가 불친절한 것은 아니지만, 아무래도 배경지식이 부족하다보니 어떻게 해결해야 할지 감이 안잡힌다.</p></div><div class="el-p"><p dir="auto">우선 CORS의 다른 출처 리소스 공유 정책(Cross Origin Resource Sharing)이 어떠한 정책인지에 대해서 알아볼 필요성이 있을 것 같다. 그 전에 아까부터 출처, 출처 거리는데 이 출처(Origin)이 무엇인지 간단하게 살펴보자.</p></div><div class="el-hr"><hr></div><div class="el-h3"><h3 data-heading="**출처(Origin) 란?**" dir="auto" class="heading" id="**출처(Origin)_란?**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>출처(Origin) 란?</strong></h3></div><div class="el-p"><p dir="auto">우리가 어떤 사이트를 접속할때 인터넷 주소창에 우리는 URL이라는 문자열을 통해 접근하게 된다.</p></div><div class="el-p"><p dir="auto">이처럼 URL은&nbsp;<a rel="noopener nofollow" class="external-link is-unresolved" href="https://domain.com:3000/user?query=name&amp;page=1" target="_self">https://domain.com:3000/user?query=name&amp;page=1</a>&nbsp;과 같이 하나의 문자열 같지만, 사실은 다음과 같이 여러개의 <strong>구성 요소</strong>로 이루어져 있다.</p></div><div class="el-p"><p dir="auto"><img alt="cors-origin" src="https://blog.kakaocdn.net/dn/BfWV7/btrqOhokpA3/IrumkJIcxCviwcDEgmq4Tk/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Protocol(Scheme) : http, https</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>Host : 사이트 도메인</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>Port : 포트 번호</li>
<li data-line="3" dir="auto"><span class="list-bullet"></span>Path : 사이트 내부 경로</li>
<li data-line="4" dir="auto"><span class="list-bullet"></span>Query string : 요청의 key와 value값</li>
<li data-line="5" dir="auto"><span class="list-bullet"></span>Fragment : 해시 태크</li>
</ul></div><div class="el-p"><p dir="auto">몇몇 독자분들 중에 이미 각 URL의 속성들에 대해 다 알고있는 수준이 높은 분들도 있고, 아직은 상세히 잘 모르는 분들도 계실거라 추측한다.</p></div><div class="el-p"><p dir="auto">CORS를 이해하는데 있어 저것들을 모두 알아야 되는 것은 아니고, 딱 3가지만 기억하면 된다.</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>Origin : Protocol + Host + Port</li>
</ul></div><div class="el-p"><p dir="auto">즉, <strong>출처(Origin) 라는 것은 Protolcol 과 Host 그리고 Port 까지 모두 합친 URL</strong>을 의미한다고 보면 된다. 간단하게 자바스크립트로도 현재 사이트의 Origin을 알아낼 수도 있다.</p></div><div class="el-p"><p dir="auto">javascript</p></div><div class="el-pre"><pre><code data-line="0">console.log(location.origin); // "https://www.naver.com" (포트 번호 80번은 생략됨)
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-hr"><hr></div><div class="el-h3"><h3 data-heading="********동일 출처 정책 (******Same-Origin Policy)**" dir="auto" class="heading" id="********동일_출처_정책_(******Same-Origin_Policy)**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>****</strong>동일 출처 정책 (<strong>**</strong>Same-Origin Policy)**</h3></div><div class="el-p"><p dir="auto">출처(Origin)에 대해서 알아봤으니 이제 본격적으로 Same Origin 정책과&nbsp;Cross Origin 정책에 대해 알아보자.</p></div><div class="el-p"><p dir="auto">먼저 SOP(Same Origin Policy) 정책은 단어 그대로 <strong>동일한 출처에 대한 정책</strong>을 말한다. 그리고 이 SOP 정책은 '동일한 출처에서만 리소스를 공유할 수 있다.'라는 법률을 가지고 있다.</p></div><div class="el-p"><p dir="auto">즉, 동일 출처(Same-Origin) 서버에 있는 리소스는 자유로이 가져올수 있지만, 다른 출처(Cross-Origin) 서버에 있는 이미지나 유튜브 영상 같은 리소스는 상호작용이 불가능하다는 말이다.</p></div><div class="el-p"><p dir="auto"><img alt="cors-sop" src="https://blog.kakaocdn.net/dn/baYRwc/btrRMbXB9oq/VMuS5Li4hfekH30UY1fbo1/img.jpg" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-h4"><h4 data-heading="**📜&nbsp;동일 출처 정책이 필요한 이유**" dir="auto" class="heading" id="**📜&nbsp;동일_출처_정책이_필요한_이유**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>📜&nbsp;동일 출처 정책이 필요한 이유</strong></h4></div><div class="el-p"><p dir="auto">그렇다면 동일 출처가 아닌 경우 접근을 차단하는 이유는 뭘까?</p></div><div class="el-p"><p dir="auto">사실 출처가 다른 두 어플리케이션이 자유로이 소통할 수 있는 환경은 꽤 위험한 환경이다. 만일 제약이 없다면, 해커가 CSRF(Cross-Site Request Forgery)나 XSS(Cross-Site Scripting) 등의 방법을 이용해서 우리가 만든 어플리케이션에서 해커가 심어놓은 코드가 실행하여 개인 정보를 가로챌 수 있다.</p></div><div class="el-p"><p dir="auto">다음은 SOP 정책이 없는 상황에서 악의적인 홈페이지에 접속하는 상황을 가정 한 것이다.</p></div><div class="el-p"><p dir="auto"><img alt="SOP(Same-Origin Policy)" src="https://blog.kakaocdn.net/dn/7Q6Sp/btrRLLdIgNN/obMHtIpKuBofkqaGK58os0/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">사용자가 악성 사이트에 접속한다.</li>
<li data-line="1" dir="auto">이때 해커가 몰래 심어놓은 악의적인 자바스크립트가 실행되어, 사용자가 모르는 사이에 어느 포털 사이트에 요청을 보낸다.</li>
<li data-line="2" dir="auto">그럼 포털 사이트에서 해당 브라우저의 쿠키를 이용하여 로그인을 하거나 등 상호작용에 따른 개인 정보를 응답 값을 받은뒤, 사이트에서 해커 서버(hacker.example.com)로 재차 보낸다.</li>
<li data-line="3" dir="auto">이외에도 사용자가 접속중인 내부망의 아이피와 포트를 가져오거나, 해커가 사용자 브라우저를 프록시처럼 악용할 수도 있다.</li>
</ol></div><div class="el-p"><p dir="auto">따라서 이러한 악의적인 경우를 방지하기 위해, SOP 정책으로 동일하지 않는 다른 출처의 스크립트가 실행되지 않도록 브라우저에서 사전에 방지하는 것이다.</p></div><div class="el-h4"><h4 data-heading="**🏷️&nbsp;같은 출처와 다른 출처 구분 기준**" dir="auto" class="heading" id="**🏷️&nbsp;같은_출처와_다른_출처_구분_기준**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>🏷️&nbsp;같은 출처와 다른 출처 구분 기준</strong></h4></div><div class="el-p"><p dir="auto">SOP 정책의 중요도와 필요성에 대해 알았으니, 두개의 출처의 다름 유무를 판단하는 기준이 무엇인지 알아보자.</p></div><div class="el-p"><p dir="auto">출처(Origin)의 동일함은 두 URL의 구성 요소 중 <strong>Protocol(Scheme), Host, Port 이 3가지만 동일</strong>하다면 동일 출처로 판단한다.</p></div><div class="el-p"><p dir="auto"><img alt="cors-sop" src="https://blog.kakaocdn.net/dn/qli4x/btrRK2fHyHZ/70WPk0dLSut8yLezgDloK1/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">기준이 되는 출처</p></div><div class="el-p"><p dir="auto">다음은&nbsp;<a rel="noopener nofollow" class="external-link is-unresolved" href="https://www.domain.com:3000" target="_self">https://www.domain.com:3000</a>&nbsp;출처에 대한 여러 URL에 따른 동일 출처 비교 표 이다.</p></div><div class="el-table" dir="ltr" style="overflow-x: auto;"><table>
<thead>
<tr>
<th dir="ltr"><strong>URL</strong></th>
<th dir="ltr"><strong>동일 출처 ?</strong></th>
<th dir="ltr"><strong>이유</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td dir="ltr"><a rel="noopener nofollow" class="external-link is-unresolved" href="https://www.domain.com:3000/about" target="_self">https://www.domain.com:3000/about</a></td>
<td dir="ltr">O</td>
<td dir="ltr">프로토콜, 호스트, 포트 번호 동일</td>
</tr>
<tr>
<td dir="ltr"><a rel="noopener nofollow" class="external-link is-unresolved" href="https://www.domain.com:3000/about?username=inpa" target="_self">https://www.domain.com:3000/about?username=inpa</a></td>
<td dir="ltr">O</td>
<td dir="ltr">프로토콜, 호스트, 포트 번호 동일</td>
</tr>
<tr>
<td dir="ltr"><a rel="noopener nofollow" class="external-link is-unresolved" href="http://www.domain.com:3000" target="_self">http://www.domain.com:3000</a></td>
<td dir="ltr">X</td>
<td dir="ltr">프로토콜 다름 (http ≠ https)</td>
</tr>
<tr>
<td dir="ltr"><a rel="noopener nofollow" class="external-link is-unresolved" href="https://www.another.co.kr:3000" target="_self">https://www.another.co.kr:3000</a></td>
<td dir="ltr">X</td>
<td dir="ltr">호스트 다름</td>
</tr>
<tr>
<td dir="ltr"><a rel="noopener nofollow" class="external-link is-unresolved" href="https://www.domain.com:8888" target="_self">https://www.domain.com:8888</a></td>
<td dir="ltr">X</td>
<td dir="ltr">포트 번호 다름</td>
</tr>
<tr>
<td dir="ltr"><a rel="noopener nofollow" class="external-link is-unresolved" href="https://www.domain.com" target="_self">https://www.domain.com</a></td>
<td dir="ltr">X</td>
<td dir="ltr">포트 번호 다름 (443 ≠ 3000)</td>
</tr>
</tbody>
</table></div><div class="el-p"><p dir="auto">정리하자면 같은 프로토콜, 호스트, 포트를 사용한다면, 그 뒤의 다른 요소는 다르더라도 같은 출처로 인정된다.</p></div><div class="el-p"><p dir="auto">반대로 프로토콜, 호스트, 포트 중 하나라도 자신의 출처와 다를경우 브라우저는 정책상 차단하게 된다.</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>Info</p>
<p>웹의 흑역사인 Internet Explorer 브라우저는 웃기게도 출처 비교시 Port 부분은 무시한다. 이는 곧 보안 취약으로 이어지며 왜 그렇게 욕을 얻어먹는지 에 대한 이유중에 하나이기도 하다.</p>
<p><img alt="cors-sop" src="https://blog.kakaocdn.net/dn/FRvQ2/btrRMcIV7w9/Kj3N8X1mzHo2PJjCdvTcr0/img.jpg" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p>
<p>잘가라 IE (하지만 좀비가 되어 살아있는건 비밀)</p>
</blockquote></div><div class="el-h4"><h4 data-heading="****🌐** 출처 비교와 차단은 브라우저가 한다**" dir="auto" class="heading" id="****🌐**_출처_비교와_차단은_브라우저가_한다**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>*<strong>*🌐</strong> 출처 비교와 차단은 브라우저가 한다**</h4></div><div class="el-p"><p dir="auto">새내기 웹개발자들이 착각하는 부분이 위의 출처 구분을 서버가 하는 것으로 오해하는 것이다. 아무래도 서버에 요청을 했는데 무언가 에러가 뜨면 서버가 문제라고 생각이 들수 밖에 없기 때문이다. 그러나 출처를 비교하는 로직은 서버에 구현된 스펙이 아닌&nbsp;<strong>브라우저에 구현된 스펙</strong>이다.</p></div><div class="el-p"><p dir="auto"><img alt="cors-sop" src="https://blog.kakaocdn.net/dn/bqkk57/btrRKJUJ5j5/dk0F2dlVfzDCURSk1kpk10/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">서버는 잘못이 없다. 브라우저가 난리쳐서 시뻘건 에러가 뜨는 것이다.</p></div><div class="el-p"><p dir="auto">사실 서버는 리소스 요청에 의한 응답은 말끔히 해주었다. 잘못이 없는 것이다. 하지만 브라우저가 이 응답을 분석해서 동일 출처가 아니면, 시뻘건 에러를 내뿜는 것이다. (사실 서버가 헤더 정보를 덜 줘서 그런것이다. 이는 뒤에서 다룬다)</p></div><div class="el-p"><p dir="auto">그래서 브라우저에는 에러가 뜨지만, 정작&nbsp;서버 쪽에는 정상적으로 응답을 했다고 하기 때문에 난항은 겪는 것이다. 즉, 응답 데이터는 멀쩡하지만 브라우저 단에서 받을수 없도록 차단을 한 것이다.</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>Info</p>
<p>그래서 CORS 에러를 해결하는 방안 중 하나로 크롬 브라우저 설정에 SOP 정책을 비활성화 하는 방법이 있긴 한데 권장하지는 않는다.</p>
</blockquote></div><div class="el-blockquote"><blockquote dir="auto">
<p>Tip</p>
<p>브라우저가 정책으로 차단을 한다는 말은, 브라우저를 통하지 않고 서버 간에 통신을 할때는 정책이 적용되지 않는다는 말과 같다.<br>
즉, 클라이언트 단 코드에서 API 요청을 하는게 아니라, 서버 단 코드에서 다른 출처의 서버로 API 요청을 하면 CORS 에러로부터 자유로워 진다. 그래서 이를 이용한 프록시(Proxy) 서버라는 것이 있다. (후술)</p>
</blockquote></div><div class="el-h4"><h4 data-heading="**🤔 그럼 죄다 차단하면 인터넷이 되는가?**" dir="auto" class="heading" id="**🤔_그럼_죄다_차단하면_인터넷이_되는가?**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>🤔 그럼 죄다 차단하면 인터넷이 되는가?</strong></h4></div><div class="el-p"><p dir="auto">하지만 인터넷은 여러 사람들에게 오픈된 환경이고, 이런 환경에서 웹페이지에서 다른 출처에 있는 리소스를 가져와 사용하는 일은 매우 흔한 일이라 무턱대고 막을 수는 없는 일이다.</p></div><div class="el-p"><p dir="auto"><img alt="cors-sop" src="https://blog.kakaocdn.net/dn/o2q4y/btrR2HoliOj/DcJrfPKp6OS5f2UDyOuPHk/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">그래서 몇 가지&nbsp;<strong>예외 조항</strong>을 두고 다른 출처의 리소스 요청이라도 이 조항에 해당할 경우에는 허용하기로 했는데, 그 중 하나가 바로 CORS 정책을 지킨 리소스 요청이다.</p></div><div class="el-hr"><hr></div><div class="el-h3"><h3 data-heading="****교차 출처 리소스 공유 (**Cross-Origin Resource Sharing)**" dir="auto" class="heading" id="****교차_출처_리소스_공유_(**Cross-Origin_Resource_Sharing)**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>*<strong>*교차 출처 리소스 공유 (</strong>Cross-Origin Resource Sharing)**</h3></div><div class="el-p"><p dir="auto">이처럼 교차 출처 리소스 공유(Cross-Origin Resource Sharing, CORS)는 단어 그대로 <strong>다른 출처의 리소스 공유에 대한 허용/비허용 정책</strong>이다.</p></div><div class="el-p"><p dir="auto">아무리 보안이 중요하지만, 개발을 하다 보면 기능상 어쩔 수 없이 다른 출처 간의 상호작용을 해야 하는 케이스도 있으며, 또한 실무적으로 다른 회사의 서버 API를 이용해야 하는 상황도 존재한다. 따라서 이와 같은 예외 사항을 두기 위해 CORS 정책을 허용하는 리소스에 한해 다른 출처라도 받아들인다는 것이다.</p></div><div class="el-h4"><h4 data-heading="**💬 우리가 욕했던 CORS는 사실 해결책이었다**" dir="auto" class="heading" id="**💬_우리가_욕했던_CORS는_사실_해결책이었다**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>💬 우리가 욕했던 CORS는 사실 해결책이었다</strong></h4></div><div class="el-p"><p dir="auto">결국 웹개발자를 괴롭히던 시뻘건 에러 메세지는 사실 브라우저의 SOP 정책에 따라 다른 출처의 리소스를 차단하면서 발생된 에러이며, CORS는 다른 출처의 리소스를 얻기위한 해결 방안 이었던 것이다. 요약하자면&nbsp;<strong>SOP 정책을 위반해도 CORS 정책에 따르면 다른 출처의 리소스라도 허용</strong>한다는 뜻이다.</p></div><div class="el-p"><p dir="auto">그럼 어떻게 CORS 정책을 따르게 하여 SOP 정책을 회피할 수 있을까? 이를 알기 위해선 브라우저의 CORS 동작 과정을 살펴 보아야 한다.</p></div><div class="el-h4"><h4 data-heading="**🔍 브라우저의 CORS 기본 동작 살펴보기**" dir="auto" class="heading" id="**🔍_브라우저의_CORS_기본_동작_살펴보기**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>🔍 브라우저의 CORS 기본 동작 살펴보기</strong></h4></div><div class="el-p"><p dir="auto"><strong>1. 클라이언트에서 HTTP요청의 헤더에 Origin을 담아 전달</strong></p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">기본적으로 웹은 HTTP 프로토콜을 이용하여 서버에 요청을 보내게 되는데,</li>
<li data-line="1" dir="auto">이때 브라우저는 요청 헤더에 Origin 이라는 필드에 출처를 함께 담아 보내게 된다.</li>
</ol></div><div class="el-p"><p dir="auto"><img alt="cors-http" src="https://blog.kakaocdn.net/dn/RZSfq/btrRNVTYjMR/tr9trY9JrQTd2kdFgh14kk/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto"><strong>2. 서버는 응답헤더에 Access-Control-Allow-Origin을 담아 클라이언트로 전달한다.</strong></p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">이후 서버가 이 요청에 대한 응답을 할 때 응답 헤더에 <del>Access-Control-Allow-Origin</del>이라는 필드를 추가하고 값으로 '이 리소스를 접근하는 것이 허용된 출처 url'을 내려보낸다.</li>
</ol></div><div class="el-p"><p dir="auto"><img alt="cors-http" src="https://blog.kakaocdn.net/dn/VVbfP/btrRPCsPQIM/uYwV4DKkW65CMcqBPAXT90/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto"><strong>3. 클라이언트에서 Origin과 서버가 보내준 Access-Control-Allow-Origin을 비교한다.</strong></p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">이후 응답을 받은 브라우저는 자신이 보냈던 요청의 Origin과 서버가 보내준 응답의 Access-Control-Allow-Origin을 비교해본 후 차단할지 말지를 결정한다.</li>
<li data-line="1" dir="auto">만약 유효하지 않다면 그 응답을 사용하지 않고 버린다. (CORS 에러 !!)</li>
<li data-line="2" dir="auto">위의 경우에는 둘다 http://localhost:3000이기 때문에 유효하니 다른 출처의 리소스를 문제없이 가져오게 된다.</li>
</ol></div><div class="el-h4"><h4 data-heading="**💬 결국 CORS 해결책은 서버의 허용이 필요**" dir="auto" class="heading" id="**💬_결국_CORS_해결책은_서버의_허용이_필요**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>💬 결국 CORS 해결책은 서버의 허용이 필요</strong></h4></div><div class="el-p"><p dir="auto">위의 브라우저의 CORS 동작 과정을 살펴보니, 길고 길었던 여정의 결론은 서버에서 <del>Access-Control-Allow-Origin</del> 헤더에 허용할 출처를 기재해서 클라이언트에 응답하면 되는 것이었다. 즉, 백엔드 개발자가 고쳐야될 부분인 것이다.</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>Info</p>
<p>그렇다면 클라이언트에서 미리 자바스크립트로 origin 헤더값을 위조하면 되지 않을까 싶지만, 브라우저에서 이를 감지하여 차단하기 때문에 결론은 불가능하다.</p>
<p><img alt="cors-http" src="https://blog.kakaocdn.net/dn/d4jie0/btrRN5wgbq0/GV217gNAANHGe4RAOkHDgK/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p>
</blockquote></div><div class="el-hr"><hr></div><div class="el-h2"><h2 data-heading="**CORS 작동 방식 3가지 시나리오**" dir="auto" class="heading" id="**CORS_작동_방식_3가지_시나리오**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>CORS 작동 방식 3가지 시나리오</strong></h2></div><div class="el-p"><p dir="auto">바로 위에서 살펴본 CORS 동작 흐름은 이해하기 쉽게 하기 위해 기본적인 작동 흐름을 보여준 것이고, 실제로는 CORS가 동작하는 방식은 한 가지가 아니라&nbsp;<strong>세 가지의 시나리오</strong>에 따라 변경되기 때문에, CORS를 정복하기 위해선 이들을 모두 알 필요가 있다. (공부가 끝이없다 ☹️)</p></div><div class="el-p"><p dir="auto">다만 이 부분은 당장 CORS를 해결하는데 있어 필수 지식은 아니지만, 만일 독자분이 단순 요청을 떠나 쿠키나 토큰과 같은 인증 데이터를 다른 출처의 서버에 요청을 해야한다면 이 섹션의 지식은 필수이다.&nbsp;또한 우리가 인터넷을 배울때 TCP / UDP의 내부 통신 과정을 배웠듯이, 브라우저의 세부적인 CORS 통신 동작 과정을 살펴봐야 나중에 최적화 작업을 할 수 있기 때문에 학습이 권장되는 바이다.</p></div><div class="el-hr"><hr></div><div class="el-h3"><h3 data-heading="**예비 요청 (Preflight Request)**" dir="auto" class="heading" id="**예비_요청_(Preflight_Request)**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>예비 요청 (Preflight Request)</strong></h3></div><div class="el-p"><p dir="auto">사실 브라우저는 요청을 보낼때 한번에 바로 보내지않고, 먼저 <strong>예비 요청</strong>을 보내 서버와 잘 통신되는지 확인한 후 <strong>본 요청</strong>을 보낸다.&nbsp;</p></div><div class="el-p"><p dir="auto">즉, 예비 요청의 역할은 본 요청을 보내기 전에 브라우저 스스로 안전한 요청인지 미리 확인하는 것이다.</p></div><div class="el-p"><p dir="auto">이때 브라우저가 예비요청을 보내는 것을&nbsp;<strong>Preflight</strong>라고 부르며,&nbsp;이 예비요청의 HTTP 메소드를 GET이나 POST가 아닌&nbsp;OPTIONS라는 요청이 사용된다는 것이 특징이다.</p></div><div class="el-p"><p dir="auto">예를들어 자바스크립트로 다음 api 요청을 보낸다고 가정해보자.</p></div><div class="el-p"><p dir="auto"><img alt="Preflight-Request" src="https://blog.kakaocdn.net/dn/cY7mtS/btrRVLDcQM6/AvNRtzkSEXk8RcRI6TPw7k/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">자바스크립트의 <del>fetch()</del> 메서드를 통해 리소스를 받아오려고 한다.</li>
<li data-line="1" dir="auto">브라우저는 서버로 HTTP OPTIONS 메소드로 예비 요청(Preflight)을 먼저 보낸다.</li>
<li data-line="2" dir="auto">Origin&nbsp;헤더에 자신의 출처를 넣는다.</li>
<li data-line="3" dir="auto">Access-Control-Request-Method&nbsp;헤더에 실제 요청에 사용할 메소드를&nbsp;설정한다.</li>
<li data-line="4" dir="auto">Access-Control-Request-Headers&nbsp;헤더에 실제 요청에 사용할 헤더들을 설정한다.</li>
<li data-line="5" dir="auto">서버는 이 예비 요청에 대한 응답으로 어떤 것을 허용하고 어떤것을 금지하고 있는지에 대한 헤더 정보를 담아서 브라우저로 보내준다.</li>
<li data-line="6" dir="auto">Access-Control-Allow-Origin&nbsp;헤더에 허용되는 Origin들의 목록을 설정한다.</li>
<li data-line="7" dir="auto">Access-Control-Allow-Methods&nbsp;헤더에 허용되는 메소드들의 목록을 설정한다.</li>
<li data-line="8" dir="auto">Access-Control-Allow-Headers&nbsp;헤더에 허용되는 헤더들의 목록을&nbsp;설정한다.</li>
<li data-line="9" dir="auto">Access-Control-Max-Age&nbsp;헤더에 해당 예비 요청이 브라우저에 캐시 될 수 있는 시간을 초 단위로 설정한다.</li>
<li data-line="10" dir="auto">이후 브라우저는 보낸 요청과 서버가 응답해준 정책을 비교하여, 해당 요청이 안전한지 확인하고 본 요청을 보내게 된다.</li>
<li data-line="11" dir="auto">서버가 본 요청에 대한 응답을 하면 최종적으로 이 응답 데이터를 자바스립트로 넘겨준다.</li>
</ol></div><div class="el-h4"><h4 data-heading="**✔️ 개발자 도구에서 예비 요청 확인하기**" dir="auto" class="heading" id="**✔️_개발자_도구에서_예비_요청_확인하기**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>✔️ 개발자 도구에서 예비 요청 확인하기</strong></h4></div><div class="el-p"><p dir="auto">위의 플로우는 브라우저의 개발자 도구의 네트워크 탭을 통해 간단히 재현이 가능하다.</p></div><div class="el-p"><p dir="auto">실제로 자바스크립트 코드로 api 요청을 보내면, 크롬 개발자 도구에서 클라이언트와 서버가 <strong>본 요청(xhr)</strong>을 보내기 전에 <strong>예비 요청(preflight)</strong> 통신을 하고 있는 것을 볼수 있다.</p></div><div class="el-p"><p dir="auto">javascript</p></div><div class="el-pre"><pre><code data-line="0">await fetch("http://localhost:4000/users/location-registration", {"method":"DELETE"})
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><img alt="cors-preflight" src="https://blog.kakaocdn.net/dn/byIF8x/btrqMQkFH3n/Un7GsktK2xrQ6CNtnZFy31/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">preflight요청이 먼저 서버에 전달됨을 알 수 있다.</p></div><div class="el-p"><p dir="auto"><img alt="cors-preflight" src="https://blog.kakaocdn.net/dn/b1MqDz/btrRNnxf5Yo/6KYkjpon3kiCvRWzS1GPYK/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">위의 사진상에는 요청 헤더의 Origin과 응답 헤더의 Access-Control-Allow-Origin 의 URL값이 서로 같아 다른 출처라도 CORS(다른 출처 리소스 공유)가 허용되서 정상 응답을 받게 된다.</p></div><div class="el-p"><p dir="auto">만일 이 둘이 다르게되면 브라우저는 이 요청이 CORS 정책을 위반했다고 판단하고 악명 높은 에러를 내뱉게 되는 것이다.</p></div><div class="el-h4"><h4 data-heading="**⏰ 예비 요청의 문제점과 캐싱**" dir="auto" class="heading" id="**⏰_예비_요청의_문제점과_캐싱**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>⏰ 예비 요청의 문제점과 캐싱</strong></h4></div><div class="el-p"><p dir="auto">요청을 보내기 전에 OPTIONS 메서드로 예비 요청을 보내 보안을 강화하는 목적의 취지는 좋다. 그러나 결국은 실제 요청에 걸리는 시간이 늘어나게 되어 어플리케이션 성능에 영향을 미치는 크나큰 단점이 있다.</p></div><div class="el-p"><p dir="auto">특히 수행하는 API 호출 수가 많으면 많을 수록 예비 요청으로 인해 서버 요청을 배로 보내게 되니 비용 적인 측면에서 폐가 될 수 있다. 따라서 <a data-tooltip-position="top" aria-label="https://inpa.tistory.com/entry/HTTP-%F0%9F%8C%90-%EC%9B%B9-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EC%9D%98-%EC%BA%90%EC%8B%9C-%EC%A0%84%EB%9E%B5-Cache-Headers-%EB%8B%A4%EB%A3%A8%EA%B8%B0" rel="noopener nofollow" class="external-link is-unresolved" href="https://inpa.tistory.com/entry/HTTP-%F0%9F%8C%90-%EC%9B%B9-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80%EC%9D%98-%EC%BA%90%EC%8B%9C-%EC%A0%84%EB%9E%B5-Cache-Headers-%EB%8B%A4%EB%A3%A8%EA%B8%B0" target="_self">브라우저 캐시(Cache)Visit Website</a> 를 이용해 <del>Access-Control-Max-Age</del> 헤더에 캐시될 시간을 명시해 주면, 이 Preflight 요청을 캐싱 시켜 최적화를 시켜줄 수 있다.</p></div><div class="el-p"><p dir="auto"><img alt="preflight-cache" src="https://blog.kakaocdn.net/dn/edoq87/btrZuCz1o65/A1pzYMjW6Jvd7f0kk2P7hK/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">600초 동안 예비 요청을 캐싱</p></div><div class="el-blockquote"><blockquote dir="auto">
<p>Tip</p>
<p>예비 요청 캐싱 기간에 대해서는, 파이어폭스 브라우저는 86400초(24시간) 까지 가능하지만 크로미엄 기반 브라우저는 7200초(2시간)이 최대이다.</p>
</blockquote></div><div class="el-p"><p dir="auto">예비 요청 캐시는 다른 캐싱 매커니즘과 유사하게 작동한다.</p></div><div class="el-p"><p dir="auto"><img alt="preflight-cache" src="https://blog.kakaocdn.net/dn/DHO4J/btrZz5HMUXp/mf4DC7l4jk15IEHKdf2ZNK/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">브라우저는 예비(Preflight) 요청을 할 때마다, 먼저 Preflight 캐시를 확인하여 해당 요청에 대한 응답이 있는지 확인한다.</li>
<li data-line="1" dir="auto">만일 응답이 캐싱 되어 있지 않다면,&nbsp; 서버에 예비 요청을 보내 인증 절차를 밟는다.</li>
<li data-line="2" dir="auto">만일 서버로 부터 Access-Control-Max-Age 응답 헤더를 받는다면 그 기간 동안 브라우저 캐시에 결과를 저장한다.</li>
<li data-line="3" dir="auto">다시 요청을 보내고 만일 응답이 캐싱 되어 있다면, 예비 요청을 서버로 보내지 않고 대신 캐시된 응답을 사용한다.</li>
</ol></div><div class="el-hr"><hr></div><div class="el-h3"><h3 data-heading="**단순 요청 (Simple Request)**" dir="auto" class="heading" id="**단순_요청_(Simple_Request)**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>단순 요청 (Simple Request)</strong></h3></div><div class="el-p"><p dir="auto">단순 요청은 말그대로 <strong>예비 요청(Prefilght)을 생략하고</strong> <strong>바로 서버에 직행으로 본 요청</strong>을 보낸 후, 서버가 이에 대한 응답의 헤더에&nbsp;Access-Control-Allow-Origin 헤더를&nbsp;보내주면 브라우저가&nbsp;CORS정책 위반 여부를 검사하는 방식이다.</p></div><div class="el-p"><p dir="auto"><img alt="simple-Request" src="https://blog.kakaocdn.net/dn/pnJSG/btrRW9XSo9s/Qb1RalORoZ6kKkxBIpWkk1/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">다만, 심플한 만큼 특정 조건을 만족하는 경우에만 예비 요청을 생략할 수 있다.</p></div><div class="el-p"><p dir="auto">대표적으로 아래 <strong>3가지 경우를 만족</strong> 할때 만 가능하다.</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">요청의 메소드는&nbsp;GET,&nbsp;HEAD,&nbsp;POST&nbsp;중 하나여야 한다.</li>
<li data-line="1" dir="auto"><del>Accept</del>,&nbsp;<del>Accept-Language</del>,&nbsp;<del>Content-Language</del>,&nbsp;<del>Content-Type</del>,&nbsp;<del>DPR</del>,&nbsp;<del>Downlink</del>,&nbsp;<del>Save-Data</del>,&nbsp;<del>Viewport-Width</del>,&nbsp;<del>Width</del> 헤더일 경우 에만 적용된다.</li>
<li data-line="2" dir="auto">Content-Type 헤더가 <del>application/x-www-form-urlencoded</del>, <del>multipart/form-data</del>, <del>text/plain</del>중 하나여야한다. 아닐 경우 예비 요청으로 동작된다.</li>
</ol></div><div class="el-p"><p dir="auto">이처럼 다소 <strong>까다로운 조건</strong>들이 많기 때문에, 위 조건을 모두 만족되어 단순 요청이 일어나는 상황은 드물다고 보면 된다.</p></div><div class="el-p"><p dir="auto">왜냐하면 대부분 HTTP API 요청은 <del>text/xml</del> 이나 <del>application/json</del> 으로 통신하기 때문에 3번째 Content-Type이 위반되기 때문이다.</p></div><div class="el-p"><p dir="auto"><strong>따라서 대부분의 API 요청은 그냥 예비 요청(preflight)으로 이루어진다 라고 이해하면 된다.</strong></p></div><div class="el-hr"><hr></div><div class="el-h3"><h3 data-heading="**인증된 요청 (Credentialed Request)**" dir="auto" class="heading" id="**인증된_요청_(Credentialed_Request)**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>인증된 요청 (Credentialed Request)</strong></h3></div><div class="el-p"><p dir="auto">인증된 요청은 클라이언트에서 서버에게 <strong>자격 인증 정보(Credential)</strong>를 실어 요청할때 사용되는 요청이다.</p></div><div class="el-p"><p dir="auto">여기서 말하는 <strong>자격 인증 정보</strong>란 세션 ID가 저장되어있는 쿠키(Cookie) 혹은 Authorization 헤더에 설정하는 토큰 값 등을 일컫는다.</p></div><div class="el-p"><p dir="auto">즉, 클라이언트에서 일반적인 JSON 데이터 외에도 쿠키 같은 인증 정보를 포함해서 다른 출처의 서버로 전달할때 CORS의 세가지 요청중 하나인 인증된 요청으로 동작된다는 말이며, 이는 기존의 단순 요청이나 예비 요청과는 살짝 다른 인증 형태로 통신하게 된다.</p></div><div class="el-h4"><h4 data-heading="**1. 클라이언트에서 인증 정보를 보내도록 설정하기**" dir="auto" class="heading" id="**1._클라이언트에서_인증_정보를_보내도록_설정하기**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>1. 클라이언트에서 인증 정보를 보내도록 설정하기</strong></h4></div><div class="el-p"><p dir="auto">기본적으로 브라우저가 제공하는 요청 API 들은 별도의 옵션 없이 브라우저의 쿠키와 같은 인증과 관련된 데이터를 함부로 요청 데이터에 담지 않도록 되어있다.</p></div><div class="el-p"><p dir="auto">이때 요청에 인증과 관련된 정보를 담을 수 있게 해주는 옵션이 바로&nbsp;<del>credentials</del> 옵션이다. 이 옵션에는 3가지의 값을 사용할 수 있으며, 각 값들이 가지는 의미는 아래와 같다.</p></div><div class="el-table" dir="ltr" style="overflow-x: auto;"><table>
<thead>
<tr>
<th dir="ltr"><strong>옵션 값</strong></th>
<th dir="ltr"><strong>설명</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td dir="ltr">same-origin(기본값)</td>
<td dir="ltr">같은 출처 간 요청에만 인증 정보를 담을 수 있다.</td>
</tr>
<tr>
<td dir="ltr">include</td>
<td dir="ltr">모든 요청에 인증 정보를 담을 수 있다.</td>
</tr>
<tr>
<td dir="ltr">omit</td>
<td dir="ltr">모든 요청에 인증 정보를 담지 않는다.</td>
</tr>
</tbody>
</table></div><div class="el-p"><p dir="auto">만일 이러한 별도의 설정을 해주지 않으면 쿠키 등의 인증 정보는 절대로 자동으로 서버에게 전송되지 않는다.</p></div><div class="el-p"><p dir="auto">서버에 인증된 요청을 보내는 방법으로는 fetch 메서드를 사용하거나 axios, jQuery 라이브리리 등 다양하다. 어떤 메서드를 사용하느냐에 따라 약간 <del>credentials</del> 옵션을 지정하는 문법이 다르니 이들을 모두 소개해 본다.</p></div><div class="el-p"><p dir="auto">javascript</p></div><div class="el-pre"><pre><code data-line="0">// fetch 메서드
fetch("https://example.com:1234/users/login", {
	method: "POST",
	credentials: "include", // 클라이언트와 서버가 통신할때 쿠키와 같은 인증 정보 값을 공유하겠다는 설정
    body: JSON.stringify({
        userId: 1,
    }),
})
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">javascript</p></div><div class="el-pre"><pre><code data-line="0">// axios 라이브러리
axios.post('https://example.com:1234/users/login', { 
    profile: { username: username, password: password } 
}, { 
	withCredentials: true // 클라이언트와 서버가 통신할때 쿠키와 같은 인증 정보 값을 공유하겠다는 설정
})
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">javascript</p></div><div class="el-pre"><pre><code data-line="0">// jQuery 라이브러리
$.ajax({
	url: "https://example.com:1234/users/login",
	type: "POST",
	contentType: "application/json; charset=utf-8",
	dataType: "json",		
	xhrFields: { 
    	withCredentials: true // 클라이언트와 서버가 통신할때 쿠키와 같은 인증 정보 값을 공유하겠다는 설정
    },
	success: function (retval, textStatus) {
		console.log( JSON.stringify(retval));
	}
});
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="**2\. 서버에서 인증된 요청에 대한 헤더 설정하기**" dir="auto" class="heading" id="**2\._서버에서_인증된_요청에_대한_헤더_설정하기**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>2. 서버에서 인증된 요청에 대한 헤더 설정하기</strong></h4></div><div class="el-p"><p dir="auto">서버도 마찬가지로 이러한 인증된 요청에 대해 <strong>일반적인 CORS 요청과는 다르게 대응</strong>해줘야 한다.</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">응답 헤더의&nbsp;<del>Access-Control-Allow-Credentials</del>&nbsp;항목을&nbsp;true로 설정해야 한다.</li>
<li data-line="1" dir="auto">응답 헤더의&nbsp;<del>Access-Control-Allow-Origin</del> 의 값에 와일드카드 문자("*")는 사용할 수 없다.</li>
<li data-line="2" dir="auto">응답 헤더의&nbsp;<del>Access-Control-Allow-Methods</del> 의 값에 와일드카드 문자("*")는 사용할 수 없다.</li>
<li data-line="3" dir="auto">응답 헤더의&nbsp;<del>Access-Control-Allow-Headers</del> 의 값에 와일드카드 문자("*")는 사용할 수 없다.</li>
</ol></div><div class="el-p"><p dir="auto">즉,&nbsp;응답의 Access-Control-Allow-Origin 헤더가 와일드카드(*)가 아닌 분명한 Origin으로 설정되어야 하고, Access-Control-Allow-Credentials 헤더는 true로 설정되어야 한다는 뜻이다. 그렇지 않으면 브라우저의 CORS 정책에 의해 응답이 거부된다. (인증 정보는 민감한 정보이기 때문에 출처를 정확하게 설정해주어야 한다)</p></div><div class="el-p"><p dir="auto">만일 이를 어길경우 아래와 같은 또다른 종류의 CORS 에러 메세지를 접하게 될 것이다.</p></div><div class="el-p"><p dir="auto"><img alt="cors-Credentialed-Request" src="https://blog.kakaocdn.net/dn/cNsHXe/btrRVtJ1HkV/UMYVLKwBJYh9ZO60fkPcz1/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">Access-Control-Allow-Credentials 설정 안했을 경우</p></div><div class="el-p"><p dir="auto"><img alt="cors-Credentialed-Request" src="https://blog.kakaocdn.net/dn/6gF6Z/btrRShDImUF/oRDvtq2l93sKlSbWhuoka0/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">Access-Control-Allow-Origin가 * 로 설정되어 있을 경우</p></div><div class="el-p"><p dir="auto">위의 과정을 그림으로 나타내면 다음과 같다.</p></div><div class="el-p"><p dir="auto"><img alt="cors-Credentialed-Request" src="https://blog.kakaocdn.net/dn/Z0QvZ/btrRR81ew57/BZAnEJ2oMcmWbQKCTR1ok1/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">참고로 인증된 요청 역시 역시 예비 요청 처럼 preflight가 먼저 일어난다. 위의 그림에서는 단순 GET 요청이기 때문에 예비 요청은 생략 되었다.</p></div><div class="el-hr"><hr></div><div class="el-h3"><h3 data-heading="**CORS 3가지 시나리오 작동 체험 사이트**" dir="auto" class="heading" id="**CORS_3가지_시나리오_작동_체험_사이트**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>CORS 3가지 시나리오 작동 체험 사이트</strong></h3></div><div class="el-p"><p dir="auto">위의 3가지 CORS 시나리오를 코드로 미리 체험할 수 있는 좋은 사이트가 있어서 소개해 본다.</p></div><div class="el-p"><p dir="auto">서버에서의 설정 형태와 클라이언트에서의 요청 형태에 따라 CORS 에러가 나기도 하고 통과되기 하는 예제를 볼 수 있다.&nbsp;</p></div><div class="el-blockquote"><blockquote dir="auto">
<p><a data-tooltip-position="top" aria-label="https://chuckchoiboi.github.io/cors-tutorial/" rel="noopener nofollow" class="external-link is-unresolved" href="https://chuckchoiboi.github.io/cors-tutorial/" target="_self"><img alt="postcard-title" src="https://tistory3.daumcdn.net/tistory/4939852/skin/images/thumb.webp" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></a></p>
</blockquote></div><div class="el-p"><p dir="auto"><img alt="cors-에러-정리" src="https://blog.kakaocdn.net/dn/nTcBY/btrRR8F2fQS/B2CwYakfk1ySslQbPx9rg1/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">메뉴 상단에 3가지 시나리오를 고를 수 있다</p></div><div class="el-p"><p dir="auto"><img alt="cors-에러-정리" src="https://blog.kakaocdn.net/dn/cEVdnb/btrRQjhjQvL/raMGwhWHLwgkkaiDSDgaWK/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto"><img alt="cors-에러-정리" src="https://blog.kakaocdn.net/dn/bE6Vl6/btrRRA3815T/qwlDawgGlU2QjgKnVhe6Nk/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-hr"><hr></div><div class="el-h2"><h2 data-heading="**CORS를 해결하는 방법 총정리** 🙌" dir="auto" class="heading" id="**CORS를_해결하는_방법_총정리**_🙌_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>CORS를 해결하는 방법 총정리</strong> 🙌</h2></div><div class="el-h3"><h3 data-heading="**1. Chrome 확장 프로그램 이용**" dir="auto" class="heading" id="**1._Chrome_확장_프로그램_이용**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>1. Chrome 확장 프로그램 이용</strong></h3></div><div class="el-p"><p dir="auto">Chrome에서는 CORS 문제를 해결하기 위한 확장 프로그램을 제공해준다.&nbsp;</p></div><div class="el-p"><p dir="auto">아래 링크에서 'Allow CORS: Access-Control-Allow-Origin' 크롬 확장 프로그램을을 설치 해준다.</p></div><div class="el-blockquote"><blockquote dir="auto">
<p><a data-tooltip-position="top" aria-label="https://chrome.google.com/webstore/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf" rel="noopener nofollow" class="external-link is-unresolved" href="https://chrome.google.com/webstore/detail/allow-cors-access-control/lhobafahddgcelffkeicbaginigeejlf" target="_self"><img alt="postcard-title" src="https://scrap.kakaocdn.net/dn/blLeek/hyM6F1w19t/rFevJ9ESpuYsy7FPOtjHo1/img.jpg?width=128&amp;height=128&amp;face=0_0_128_128" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></a></p>
<p>Easily add (Access-Control-Allow-Origin: *) rule to the response header.</p>
</blockquote></div><div class="el-p"><p dir="auto">그러면 브라우저 오른쪽 상단에서 확장 프로그램을 활성화 시킬 수 있다. 해당 프로그램을 활성화 시키게 되면,&nbsp;<strong>로컬(localhost) 환경에서 API를 테스트 시, CORS 문제를 해결</strong>할 수 있다.</p></div><div class="el-p"><p dir="auto">서버 테스트 환경에서 고민하지 않고 빠르게 CORS를 해결하는데 좋은 선택지일 것이다.</p></div><div class="el-p"><p dir="auto"><img alt="cors-에러-정리" src="https://blog.kakaocdn.net/dn/pYTv2/btrqMDToviG/FkWXdo9pdId91ir1v0HcBK/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-hr"><hr></div><div class="el-h3"><h3 data-heading="**2. 프록시 사이트 이용하기**" dir="auto" class="heading" id="**2._프록시_사이트_이용하기**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>2. 프록시 사이트 이용하기</strong></h3></div><div class="el-p"><p dir="auto">프록시(Proxy)란 클라이언트와 서버 사이의 중계 대리점이라고 보면 된다.</p></div><div class="el-p"><p dir="auto">즉, 프론트에서 직접 서버에 리소스를 요청을 했더니 서버에서 따로 설정을 안해줘서 CORS 에러가 뜬다면, <strong>모든 출처를 허용한 서버 대리점</strong>을 통해 요청을 하면 되는 것이다.</p></div><div class="el-p"><p dir="auto"><img alt="cors-proxy" src="https://blog.kakaocdn.net/dn/38gu2/btrRS6vg4G2/4rzw4PWt6KXUFbVqtrlm6k/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">다만 현재 무료 프록시 서버 대여 서비스들은 모두 악용 사례 때문에&nbsp;api 요청 횟수 제한을 두어 실전에서는 사용하기 무리이다. 따라서 테스트용이나 맛보기용으로 사용하되, 실전에서는 직접 프록시 서버를 구축하여 사용하여야 한다.</p></div><div class="el-h4"><h4 data-heading="**heroku 프록시 서버**" dir="auto" class="heading" id="**heroku_프록시_서버**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>heroku 프록시 서버</strong></h4></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><a data-tooltip-position="top" aria-label="http://cors-anywhere.herokuapp.com/corsdemo" rel="noopener nofollow" class="external-link is-unresolved" href="http://cors-anywhere.herokuapp.com/corsdemo" target="_self">http://cors-anywhere.herokuapp.com/corsdemoVisit Website</a></li>
<li data-line="1" dir="auto">위의 사이트로 가서 버튼을 누르고 데모 서버를 활성화 시킨다.</li>
<li data-line="2" dir="auto">다만 시간 제한이 있기 때문에 일시적인 해결 방편 이다.</li>
</ol></div><div class="el-p"><p dir="auto"><img alt="cors-proxy" src="https://blog.kakaocdn.net/dn/MtNzS/btrRRuVIjr4/5RTRaqTOETfsc1LKAWUhAk/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">javascript</p></div><div class="el-pre"><pre><code data-line="0">const url = 'https://google.com' // 이 부분을 이용하는 서버 URL로 변경

fetch(\`https://cors-anywhere.herokuapp.com/${url}\`)
    .then((response) =&gt; response.text())
    .then((data) =&gt; console.log(data));
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="**cors proxy app 프록시 서버**" dir="auto" class="heading" id="**cors_proxy_app_프록시_서버**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>cors proxy app 프록시 서버</strong></h4></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><a data-tooltip-position="top" aria-label="https://github.com/raravel/cors-proxy" rel="noopener nofollow" class="external-link is-unresolved" href="https://github.com/raravel/cors-proxy" target="_self">raravelVisit Website</a>님이 만드신 서비스</li>
<li data-line="1" dir="auto">axios 라이브러리 설치가 필요하다.</li>
</ol></div><div class="el-p"><p dir="auto">html</p></div><div class="el-pre"><pre><code data-line="0">&lt;script src='https://cdnjs.cloudflare.com/ajax/libs/axios/1.1.3/axios.min.js'&gt;&lt;/script&gt;
&lt;script&gt;
    axios({
        url: 'https://cors-proxy.org/api/',
        method: 'get',
        headers: {
            'cors-proxy-url' : 'https://google.com/' // 이 부분을 이용하는 서버 URL로 변경
        },
    }).then((res) =&gt; {
        console.log(res.data);
    })
&lt;/script&gt;
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="**cors.sh 프록시 서버**" dir="auto" class="heading" id="**cors.sh_프록시_서버**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>cors.sh 프록시 서버</strong></h4></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><a data-tooltip-position="top" aria-label="https://cors.sh/" rel="noopener nofollow" class="external-link is-unresolved" href="https://cors.sh/" target="_self">https://cors.sh/Visit Website</a></li>
<li data-line="1" dir="auto">실전에서 이용하려면 유료 결제가 필요하듯 하다. (free도 가능)</li>
</ol></div><div class="el-p"><p dir="auto">javascript</p></div><div class="el-pre"><pre><code data-line="0">const url = 'https://google.com' // 이 부분을 이용하는 서버 URL로 변경

fetch(\`https://proxy.cors.sh/${url}\`)
    .then((response) =&gt; response.text())
    .then((data) =&gt; console.log(data));
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-hr"><hr></div><div class="el-h3"><h3 data-heading="**3. 서버에서 Access-Control-Allow-Origin 헤더 세팅하기**" dir="auto" class="heading" id="**3._서버에서_Access-Control-Allow-Origin_헤더_세팅하기**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>3. 서버에서 Access-Control-Allow-Origin 헤더 세팅하기</strong></h3></div><div class="el-p"><p dir="auto">직접 서버에서 HTTP 헤더 설정을 통해 출처를 허용하게 설정하는 가장 정석적인 해결책이다.</p></div><div class="el-p"><p dir="auto">서버의 종류도 노드 서버, 스프링 서버, 아파치 서버 등 여러가지가 있으니, 이에 대한 각각 해결책을 나열해본다.</p></div><div class="el-p"><p dir="auto">각 서버의 문법에 맞게 위의 HTTP 헤더를 추가해 주면 된다.</p></div><div class="el-p"><p dir="auto">참고로 CORS에 연관된 HTTP 헤더 값으로는 다음 종류가 있다. (이들을 모두 설정할 필요는 없다)</p></div><div class="el-p"><p dir="auto">http</p></div><div class="el-pre"><pre><code data-line="0"># 헤더에 작성된 출처만 브라우저가 리소스를 접근할 수 있도록 허용함.
# * 이면 모든 곳에 공개되어 있음을 의미한다. 
Access-Control-Allow-Origin : https://naver.com

# 리소스 접근을 허용하는 HTTP 메서드를 지정해 주는 헤더
Access-Control-Request-Methods : GET, POST, PUT, DELETE

# 요청을 허용하는 해더.
Access-Control-Allow-Headers : Origin,Accept,X-Requested-With,Content-Type,Access-Control-Request-Method,Access-Control-Request-Headers,Authorization

# 클라이언트에서 preflight 의 요청 결과를 저장할 기간을 지정
# 60초 동안 preflight 요청을 캐시하는 설정으로, 첫 요청 이후 60초 동안은 OPTIONS 메소드를 사용하는 예비 요청을 보내지 않는다.
Access-Control-Max-Age : 60

# 클라이언트 요청이 쿠키를 통해서 자격 증명을 해야 하는 경우에 true. 
# 자바스크립트 요청에서 credentials가 include일 때 요청에 대한 응답을 할 수 있는지를 나타낸다.
Access-Control-Allow-Credentials : true

# 기본적으로 브라우저에게 노출이 되지 않지만, 브라우저 측에서 접근할 수 있게 허용해주는 헤더를 지정
Access-Control-Expose-Headers : Content-Length
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="**Node.js 세팅**" dir="auto" class="heading" id="**Node.js_세팅**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>Node.js 세팅</strong></h4></div><div class="el-p"><p dir="auto">서버에 response 헤더(Header) 값으로 Access-Control 설정을 해준다.</p></div><div class="el-p"><p dir="auto">javascript</p></div><div class="el-pre"><pre><code data-line="0">var http = require('http');

const PORT = process.env.PORT || 3000;

var httpServer = http.createServer(function (request, response) {
    // Setting up Headers
    response.setHeader('Access-Control-Allow-origin', '*'); // 모든 출처(orogin)을 허용
    response.setHeader('Access-Control-Allow-Methods', 'GET, POST, OPTIONS, PUT, PATCH, DELETE'); // 모든 HTTP 메서드 허용
    response.setHeader('Access-Control-Allow-Credentials', 'true'); // 클라이언트와 서버 간에 쿠키 주고받기 허용

    // ...

    response.writeHead(200, { 'Content-Type': 'text/plain' });
    response.end('ok');
});

httpServer.listen(PORT, () =&gt; {
    console.log('Server is running at port 3000...');
});
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">이때 <del>Access-Control-Allow-origin</del> 헤더 값으로 <del>*</del> 을 사용하면 모든 Origin에서 오는 요청을 허용한다는 의미이므로 당장은 편할 수 있겠지만, 바꿔서 생각하면 정체도 모르는 이상한 출처에서 오는 요청까지 모두 허용하기 때문에 보안은 더 허술해진다. 그러니 가급적이면 귀찮더라도 다음과 같이 출처를 직접 명시해주도록 하자.</p></div><div class="el-p"><p dir="auto">javascript</p></div><div class="el-pre"><pre><code data-line="0">response.setHeader('Access-Control-Allow-origin', 'https://inpa.tistory.com');
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="**Express.js **세팅****" dir="auto" class="heading" id="**Express.js_**세팅****_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>Express.js </strong>세팅****</h4></div><div class="el-p"><p dir="auto">shell</p></div><div class="el-pre"><pre><code data-line="0">&gt; npm i cors
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">javascript</p></div><div class="el-pre"><pre><code data-line="0">const express = require('express')
const cors = require("cors"); // cors 설정을 편안하게 하는 패키지
const app = express();

// ...

app.use(cors({
    origin: "https://naver.com", // 접근 권한을 부여하는 도메인
    credentials: true, // 응답 헤더에 Access-Control-Allow-Credentials 추가
    optionsSuccessStatus: 200, // 응답 상태 200으로 설정
}));

// ...
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-blockquote"><blockquote dir="auto">
<p><a data-tooltip-position="top" aria-label="https://inpa.tistory.com/entry/NODE-%F0%9F%93%9A-CORS-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0-cors-%EB%AA%A8%EB%93%88" rel="noopener nofollow" class="external-link is-unresolved" href="https://inpa.tistory.com/entry/NODE-%F0%9F%93%9A-CORS-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0-cors-%EB%AA%A8%EB%93%88" target="_self"><img alt="postcard-title" src="https://scrap.kakaocdn.net/dn/zZJwv/hyNQXUt0yv/G38QvLqw7fPeAZZlhVuvcK/img.jpg?width=800&amp;height=450&amp;face=0_0_800_450,https://scrap.kakaocdn.net/dn/c2YFol/hyNRalZLBF/ebEqP5wwwcVOeG94eEsHW0/img.jpg?width=800&amp;height=450&amp;face=0_0_800_450,https://scrap.kakaocdn.net/dn/d4NpgT/hyNQ5ydpOZ/54EEyef38jIARTAS89BloK/img.jpg?width=1280&amp;height=720&amp;face=0_0_1280_720" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></a></p>
<p>CORS 란? [WEB] 📚 CORS 💯 정리 &amp; 해결 방법 👏 CORS(Cross Origin Resource Sharing) CORS 정책은 우리가 가져오는 리소스들이 안전한지 검사하는 관문이다. 웹개발을 하는 사람들은 이 CORS 정책위반으로 인해</p>
</blockquote></div><div class="el-h4"><h4 data-heading="**JSP / Servlet **세팅****" dir="auto" class="heading" id="**JSP_/_Servlet_**세팅****_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>JSP / Servlet </strong>세팅****</h4></div><div class="el-p"><p dir="auto">java</p></div><div class="el-pre"><pre><code data-line="0">import javax.servlet.*;

public class CORSInterceptor implements Filter {

    private static final String[] allowedOrigins = {
            "http://localhost:3000", "http://localhost:5500", "http://localhost:5501",
            "http://127.0.0.1:3000", "http://127.0.0.1:5500", "http://127.0.0.1:5501"
    };

    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {
        HttpServletRequest request = (HttpServletRequest) servletRequest;

        String requestOrigin = request.getHeader("Origin");
        if(isAllowedOrigin(requestOrigin)) {
            // Authorize the origin, all headers, and all methods
            ((HttpServletResponse) servletResponse).addHeader("Access-Control-Allow-Origin", requestOrigin);
            ((HttpServletResponse) servletResponse).addHeader("Access-Control-Allow-Headers", "*");
            ((HttpServletResponse) servletResponse).addHeader("Access-Control-Allow-Methods",
                    "GET, OPTIONS, HEAD, PUT, POST, DELETE");

            HttpServletResponse resp = (HttpServletResponse) servletResponse;

            // CORS handshake (pre-flight request)
            if (request.getMethod().equals("OPTIONS")) {
                resp.setStatus(HttpServletResponse.SC_ACCEPTED);
                return;
            }
        }
        // pass the request along the filter chain
        filterChain.doFilter(request, servletResponse);
    }

    private boolean isAllowedOrigin(String origin){
        for (String allowedOrigin : allowedOrigins) {
            if(origin.equals(allowedOrigin)) return true;
        }
        return false;
    }
}
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="**Spring **세팅****" dir="auto" class="heading" id="**Spring_**세팅****_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>Spring </strong>세팅****</h4></div><div class="el-p"><p dir="auto">java</p></div><div class="el-pre"><pre><code data-line="0">// 스프링 서버 전역적으로 CORS 설정
@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/**")
        	.allowedOrigins("http://localhost:8080", "http://localhost:8081") // 허용할 출처
            .allowedMethods("GET", "POST") // 허용할 HTTP method
            .allowCredentials(true) // 쿠키 인증 요청 허용
            .maxAge(3000) // 원하는 시간만큼 pre-flight 리퀘스트를 캐싱
    }
}
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">java</p></div><div class="el-pre"><pre><code data-line="0">// 특정 컨트롤러에만 CORS 적용하고 싶을때.
@Controller
@CrossOrigin(origins = "*", methods = RequestMethod.GET) 
public class customController {

	// 특정 메소드에만 CORS 적용 가능
    @GetMapping("/url")  
    @CrossOrigin(origins = "*", methods = RequestMethod.GET) 
    @ResponseBody
    public List&lt;Object&gt; findAll(){
        return service.getAll();
    }
}
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="**Apache **세팅****" dir="auto" class="heading" id="**Apache_**세팅****_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>Apache </strong>세팅****</h4></div><div class="el-p"><p dir="auto">httpd.conf에서 <del>&lt;IfModule mod_headers.c&gt;</del> 태그 안에 헤더 설정을 넣어준다. 또는 VirualHost 부분에 넣어도 된다.</p></div><div class="el-p"><p dir="auto">xml</p></div><div class="el-pre"><pre><code data-line="0">&lt;IfModule mod_headers.c&gt;
	Header set Access-Control-Allow-Origin "*"
&lt;/IfModule&gt;
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="**Tomcat**" dir="auto" class="heading" id="**Tomcat**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>Tomcat</strong></h4></div><div class="el-p"><p dir="auto">톰캣 폴더 경로의 conf/web.xml 혹은 webapps 내의 프로젝트 폴더 내 WEB-INF/web.xml 파일에 아래 헤더 설정을 추가</p></div><div class="el-p"><p dir="auto">xml</p></div><div class="el-pre"><pre><code data-line="0">&lt;filter&gt;
    &lt;filter-name&gt;CorsFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.apache.catalina.filters.CorsFilter&lt;/filter-class&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;cors.allowed.origins&lt;/param-name&gt;
        &lt;param-value&gt;*&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;cors.allowed.methods&lt;/param-name&gt;
        &lt;param-value&gt;GET,POST,HEAD,OPTIONS,PUT,DELETE&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;cors.allowed.headers&lt;/param-name&gt;
        &lt;param-value&gt;Content-Type,X-Requested-With,accept,Origin,Access-Control-Request-Method,Access-Control-Request-Headers&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;cors.exposed.headers&lt;/param-name&gt;
        &lt;param-value&gt;Access-Control-Allow-Origin,Access-Control-Allow-Credentials&lt;/param-value&gt;
    &lt;/init-param&gt;
    &lt;init-param&gt;
    	&lt;!-- 쿠키 통신을 안하는데 이걸 true로 하면 4XX 서버 에러가 뜬다 --&gt;
        &lt;param-name&gt;cors.support.credentials&lt;/param-name&gt;
        &lt;param-value&gt;false&lt;/param-value&gt; 
    &lt;/init-param&gt;
    &lt;init-param&gt;
        &lt;param-name&gt;cors.preflight.maxage&lt;/param-name&gt;
        &lt;param-value&gt;10&lt;/param-value&gt;
    &lt;/init-param&gt;
&lt;/filter&gt;
&lt;filter-mapping&gt;
    &lt;filter-name&gt;CorsFilter&lt;/filter-name&gt;
    &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
&lt;/filter-mapping&gt;
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="**Nginx**" dir="auto" class="heading" id="**Nginx**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>Nginx</strong></h4></div><div class="el-p"><p dir="auto">nginx.conf 파일 안에 <del>location /</del> 부분에 add_header 값으로 헤더 설정을 추가</p></div><div class="el-p"><p dir="auto">json</p></div><div class="el-pre"><pre><code data-line="0">location / {
    root html;
    add_header 'Access-Control-Allow-Origin' '*';
    index  index.html index.htm;
}
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h4"><h4 data-heading="**AWS (S3 호스팅)**" dir="auto" class="heading" id="**AWS_(S3_호스팅)**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>AWS (S3 호스팅)</strong></h4></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">S3 콘솔 메뉴에 들어가 버킷을 선택한다.</li>
<li data-line="1" dir="auto">권한(Permissions) 탭을 선택한다.</li>
<li data-line="2" dir="auto">교차 출처 리소스 공유&nbsp;창에서 [편집] 선택한다.</li>
<li data-line="3" dir="auto">텍스트 상자에 아래 JSON CORS 규칙을 입력한다.</li>
</ol></div><div class="el-p"><p dir="auto"><img alt="s3-cors" src="https://blog.kakaocdn.net/dn/cyXIRR/btrZzawiBkH/bsEZhz8d7SB7YpkSgLPN90/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">json</p></div><div class="el-pre"><pre><code data-line="0">[
  {
    "AllowedHeaders": [
      "Authorization"
    ],
    "AllowedMethods": [
      "GET",
      "HEAD"
    ],
    "AllowedOrigins": [
      "http://www.example.com"
    ],
    "ExposeHeaders": [
      "Access-Control-Allow-Origin"
    ]
  }
]
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-hr"><hr></div><div class="el-h2"><h2 data-heading="**추가적으로 알아야 하는 CORS 사례**" dir="auto" class="heading" id="**추가적으로_알아야_하는_CORS_사례**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>추가적으로 알아야 하는 CORS 사례</strong></h2></div><div class="el-p"><p dir="auto">압도적인 포스팅량을 이겨내고 여기까지 스크롤하여 학습한 독자분들께 존경의 박수를 보낸다. 하지만 겨우겨우 CORS 정책에 대해 공부하고 해결법을 적용 시켰더니 또 공부할게 있다고 하니 멘탈이 흔들린다. 다만 이 부분은 실무에 자주 발생하는 상황은 아니기 때문에 지금 당장 학습할 필요성은 적으며 조금 심화적인 내용이라 난이도도 있어, 시간있을때 나중에 학습하길 권장한다.</p></div><div class="el-p"><p dir="auto"><img alt="추가적으로 알아야 하는 CORS 사례" src="https://blog.kakaocdn.net/dn/dcXgLS/btrR2r0sbZm/JBVnWO5qhkNqT6Fq28lgk1/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-h3"><h3 data-heading="**CORS의 보안 취약점 가이드**" dir="auto" class="heading" id="**CORS의_보안_취약점_가이드**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>CORS의 보안 취약점 가이드</strong></h3></div><div class="el-p"><p dir="auto">가만 생각해보면, 원래는 SOP 정책으로 막혔어야할 외부 리소스들이 CORS 정책으로 억지로 뚫어줬으니 공격에 그대로 노출되는건 당연한 수순일지 모른다. 예를들어 CORS 정책에 대해 서버에서 너무 유연하게 리소스 허용 설정을 하게 될 경우, 해당 웹어플리케이션의 흐름을 악용하여 타인의 개인 정보를 해킹할 위험성이 있게 된다.</p></div><div class="el-p"><p dir="auto">대표적인 예로 허용할 도메인들을 설정하기 귀찮다고 와일드 카드(*)로 퉁치는걸 들 수 있다. 즉, 서버 개발자가 CORS 정책을 잘못 구성할 경우 심각한 보안 위협이 될 수 있다는 말이다. 이에 대한 보안 문제점 예방 가이드에 대해 다음 포스팅으로 나눠본다.</p></div><div class="el-blockquote"><blockquote dir="auto">
<p><a data-tooltip-position="top" aria-label="https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-CORS-%EB%B3%B4%EC%95%88-%EC%B7%A8%EC%95%BD%EC%A0%90-%EC%98%88%EB%B0%A9-%EA%B0%80%EC%9D%B4%EB%93%9C" rel="noopener nofollow" class="external-link is-unresolved" href="https://inpa.tistory.com/entry/WEB-%F0%9F%8C%90-CORS-%EB%B3%B4%EC%95%88-%EC%B7%A8%EC%95%BD%EC%A0%90-%EC%98%88%EB%B0%A9-%EA%B0%80%EC%9D%B4%EB%93%9C" target="_self"><img alt="postcard-title" src="https://scrap.kakaocdn.net/dn/bUG5Z5/hyQH4YyDSn/qf2i8Nzl50KhF8NPxgcwKk/img.jpg?width=800&amp;height=484&amp;face=0_0_800_484,https://scrap.kakaocdn.net/dn/JDJ5n/hyQJzby3cZ/GeZMJykOlBmX8VsWmtBPk1/img.jpg?width=800&amp;height=484&amp;face=0_0_800_484,https://scrap.kakaocdn.net/dn/q3f9W/hyQJuuyE6e/XTRuFZ4oaIYuKkHGOefH2K/img.png?width=1066&amp;height=657&amp;face=0_0_1066_657" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></a></p>
<p>CORS의 보안 문제점 다른 출처(Origin)의 서버의 리소스를 제약없이 가져와 사용할 경우 XSS(Cross-Site Scripting)나 CSRF(Cross-Site Request Fogery)와 같은 스크립팅 공격을 당할 위험성이 있다. 그래서 탄생한</p>
</blockquote></div><div class="el-hr"><hr></div><div class="el-h3"><h3 data-heading="**Chorme PNA CORS 문제**" dir="auto" class="heading" id="**Chorme_PNA_CORS_문제**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>Chorme PNA CORS 문제</strong></h3></div><div class="el-p"><p dir="auto">만일 위에서 본 일반적인 CORS 에러 메세지가 아닌 아래와 같은 또다른 CORS 에러 메세지가 나왔다면, 별도의 사설망 접근(private network access)에 대한 지식이 필요하다.</p></div><div class="el-p"><p dir="auto"><img alt="Chorme PNA CORS" src="https://blog.kakaocdn.net/dn/5e9ro/btr3QwIj22e/YKd12YysGHfkIdD0y7zF0K/img.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-p"><p dir="auto">"The&nbsp;request&nbsp;client&nbsp;is&nbsp;not&nbsp;a&nbsp;secure&nbsp;context&nbsp;and&nbsp;the&nbsp;resource&nbsp;is&nbsp;in&nbsp;more-private&nbsp;adress&nbsp;space&nbsp;local"</p></div><div class="el-p"><p dir="auto">간단히 말하자면 <strong>공인 네트워크의 웹사이트에서 사설 네트워크의 리소스를 호출</strong>할때 사설망 접근 관련 CORS 에러가 뜨게 되는데, 자세한 내용은 아래 포스팅을 참고하길 바란다.</p></div><div class="el-blockquote"><blockquote dir="auto">
<p><a data-tooltip-position="top" aria-label="https://inpa.tistory.com/entry/%F0%9F%8C%90-%ED%81%AC%EB%A1%AC-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-PNA-%EA%B6%8C%ED%95%9C%EA%B3%BC-CORS-%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0" rel="noopener nofollow" class="external-link is-unresolved" href="https://inpa.tistory.com/entry/%F0%9F%8C%90-%ED%81%AC%EB%A1%AC-%EB%B8%8C%EB%9D%BC%EC%9A%B0%EC%A0%80-PNA-%EA%B6%8C%ED%95%9C%EA%B3%BC-CORS-%ED%95%B4%EA%B2%B0%ED%95%98%EA%B8%B0" target="_self"><img alt="postcard-title" src="https://scrap.kakaocdn.net/dn/WxCAK/hyR100iHuQ/kteKMqqkbzIcaFWQf9RFfk/img.jpg?width=800&amp;height=450&amp;face=0_0_800_450,https://scrap.kakaocdn.net/dn/YIj1e/hyR14uRCFE/keVlIFUx6WtsGcCiHSPW3K/img.jpg?width=800&amp;height=450&amp;face=0_0_800_450,https://scrap.kakaocdn.net/dn/rpt2P/hyR10MLbp7/Cv5XdJ6iguLDGiqoHXHaN1/img.png?width=1600&amp;height=1023&amp;face=0_0_1600_1023" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></a></p>
<p>Chrome PNA (Private Network Access) 사설망 접근(private network access) 이란, 비인증된 공인(public) 웹사이트에서, 사이트를 방문한 사용자의 와 같은 사설 네트워크망(localhost(127.0.0.1) or 192.168.0.* 아이피) 엔드</p>
</blockquote></div><div class="el-hr"><hr></div><div class="el-h3"><h3 data-heading="**브라우저 Cache에 의한 CORS 문제**" dir="auto" class="heading" id="**브라우저_Cache에_의한_CORS_문제**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>브라우저 Cache에 의한 CORS 문제</strong></h3></div><div class="el-p"><p dir="auto">브라우저는 기본적으로 이미지와 같은 고용량 리소스에 대해서 한번 요청해서 응답받으면 자동으로 cache하여 저장해놓는다. 그러면 나중에 똑같은 리소스를 재요청해도 캐시 저장소에서 끌어다 쓰면 네트워크 통신없이 빠르게 가져올 수 있어 성능 상 굉장한 이점을 얻기 때문이다.</p></div><div class="el-p"><p dir="auto">그러나 캐시에 대해서 기본적인 지식이 있는 독자분들이라면 이 캐시 기능 때문에 최신 리소스 불일치 현상 및 여러가지 자잘한 문제점이 존재한다는 단점은 알고 있을 것이다. 즉, CORS 역시 이러한 캐시 문제 때문에 뜬금없이 발생될수도 있다.</p></div><div class="el-blockquote"><blockquote dir="auto">
<p><a data-tooltip-position="top" aria-label="https://inpa.tistory.com/entry/%F0%9F%8C%90-CORS-%EC%BA%90%EC%8B%9C-%EC%97%90%EB%9F%AC" rel="noopener nofollow" class="external-link is-unresolved" href="https://inpa.tistory.com/entry/%F0%9F%8C%90-CORS-%EC%BA%90%EC%8B%9C-%EC%97%90%EB%9F%AC" target="_self"><img alt="postcard-title" src="https://scrap.kakaocdn.net/dn/m5S7P/hyR19WQOpV/Dt0Rlcdk2fJIrwSbk5mgy1/img.jpg?width=800&amp;height=400&amp;face=0_0_800_400,https://scrap.kakaocdn.net/dn/bSAMQx/hyR1WJYuKg/uKBeg9JoEIp1TdNEPry5P0/img.jpg?width=800&amp;height=400&amp;face=0_0_800_400,https://scrap.kakaocdn.net/dn/btrtSl/hyR1XPEq0q/bTxk9uR82wmlKlewgSmkM1/img.png?width=964&amp;height=692&amp;face=0_0_964_692" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></a></p>
<p>브라우저 캐시로 인한 CORS 문제 CORS(Cross-Origin Resource Sharing)는 서로 다른 출처(Origin)의 리소스를 공유하고 싶을때 사용하는 정책을 말한다. 기본적으로 브라우저는 SOP(Same Origin Policy) 정책을 따르</p>
</blockquote></div><div class="el-hr"><hr></div><div class="el-p"><p dir="auto">참고 문헌</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>1</li>
</ul></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://inpa.tistory.com/entry/#" rel="noopener nofollow" class="external-link is-unresolved" href="https://inpa.tistory.com/entry/#" target="_self">https://evan-moon.github.io/2020/05/21/about-cors/</a></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>2</li>
</ul></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://inpa.tistory.com/entry/#" rel="noopener nofollow" class="external-link is-unresolved" href="https://inpa.tistory.com/entry/#" target="_self">https://core-research-team.github.io/2021-04-01/Easy-to-understand-Web-security-model-story-1(SOP,-CORS)</a></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>3</li>
</ul></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://inpa.tistory.com/entry/#" rel="noopener nofollow" class="external-link is-unresolved" href="https://inpa.tistory.com/entry/#" target="_self">https://blog.devgenius.io/cors-34e947046600</a></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>4</li>
</ul></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://inpa.tistory.com/entry/#" rel="noopener nofollow" class="external-link is-unresolved" href="https://inpa.tistory.com/entry/#" target="_self">https://westsideelectronics.com/cors-and-how-to-fix/</a></p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>5</li>
</ul></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://inpa.tistory.com/entry/#" rel="noopener nofollow" class="external-link is-unresolved" href="https://inpa.tistory.com/entry/#" target="_self">https://blog.bitsrc.io/4-ways-to-reduce-cors-preflight-time-in-web-apps-1f47fe7558</a></p></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div class="graph-view-wrapper"><div class="feature-header"><div class="feature-title">Interactive Graph</div></div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<div class="graph-icon graph-global" role="button" aria-label="Global Graph" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-git-fork"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#🌐_악명_높은_CORS_개념_&amp;_해결법_-_정리_끝판왕_👏_0" data-path="#🌐_악명_높은_CORS_개념_&amp;_해결법_-_정리_끝판왕_👏_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="🌐 악명 높은 CORS 개념 &amp; 해결법 - 정리 끝판왕 👏">🌐 악명 높은 CORS 개념 &amp; 해결법 - 정리 끝판왕 👏</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**요청_방식에_따라_다른_CORS_발생_여부**_0" data-path="#**요청_방식에_따라_다른_CORS_발생_여부**_0"><div class="tree-item-inner heading-link" heading-name="**요청 방식에 따라 다른 CORS 발생 여부**"><strong>요청 방식에 따라 다른 CORS 발생 여부</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**1\._<img>,_<video>,_<script>,_<link>_태그_등**_0" data-path="#**1\._<img>,_<video>,_<script>,_<link>_태그_등**_0"><div class="tree-item-inner heading-link" heading-name="**1\. <img>, <video>, <script>, <link> 태그 등**"><strong>1. <img referrerpolicy="no-referrer">, <video>, </video></strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**2\._XMLHttpRequest,_Fetch_API_스크립트**_0" data-path="#**2\._XMLHttpRequest,_Fetch_API_스크립트**_0"><div class="tree-item-inner heading-link" heading-name="**2\. XMLHttpRequest, Fetch API 스크립트**"><strong>2. XMLHttpRequest, Fetch API 스크립트</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**CORS_에러_한방_이해하기**_0" data-path="#**CORS_에러_한방_이해하기**_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="**CORS 에러 한방 이해하기**"><strong>CORS 에러 한방 이해하기</strong></div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**출처(Origin)_란?**_0" data-path="#**출처(Origin)_란?**_0"><div class="tree-item-inner heading-link" heading-name="**출처(Origin) 란?**"><strong>출처(Origin) 란?</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#********동일_출처_정책_(******Same-Origin_Policy)**_0" data-path="#********동일_출처_정책_(******Same-Origin_Policy)**_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="********동일 출처 정책 (******Same-Origin Policy)**"><strong>****</strong>동일 출처 정책 (<strong>**</strong>Same-Origin Policy)**</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**📜&nbsp;동일_출처_정책이_필요한_이유**_0" data-path="#**📜&nbsp;동일_출처_정책이_필요한_이유**_0"><div class="tree-item-inner heading-link" heading-name="**📜&nbsp;동일 출처 정책이 필요한 이유**"><strong>📜&nbsp;동일 출처 정책이 필요한 이유</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**🏷️&nbsp;같은_출처와_다른_출처_구분_기준**_0" data-path="#**🏷️&nbsp;같은_출처와_다른_출처_구분_기준**_0"><div class="tree-item-inner heading-link" heading-name="**🏷️&nbsp;같은 출처와 다른 출처 구분 기준**"><strong>🏷️&nbsp;같은 출처와 다른 출처 구분 기준</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#****🌐**_출처_비교와_차단은_브라우저가_한다**_0" data-path="#****🌐**_출처_비교와_차단은_브라우저가_한다**_0"><div class="tree-item-inner heading-link" heading-name="****🌐** 출처 비교와 차단은 브라우저가 한다**">*<strong>*🌐</strong> 출처 비교와 차단은 브라우저가 한다**</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**🤔_그럼_죄다_차단하면_인터넷이_되는가?**_0" data-path="#**🤔_그럼_죄다_차단하면_인터넷이_되는가?**_0"><div class="tree-item-inner heading-link" heading-name="**🤔 그럼 죄다 차단하면 인터넷이 되는가?**"><strong>🤔 그럼 죄다 차단하면 인터넷이 되는가?</strong></div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#****교차_출처_리소스_공유_(**Cross-Origin_Resource_Sharing)**_0" data-path="#****교차_출처_리소스_공유_(**Cross-Origin_Resource_Sharing)**_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="****교차 출처 리소스 공유 (**Cross-Origin Resource Sharing)**">*<strong>*교차 출처 리소스 공유 (</strong>Cross-Origin Resource Sharing)**</div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**💬_우리가_욕했던_CORS는_사실_해결책이었다**_0" data-path="#**💬_우리가_욕했던_CORS는_사실_해결책이었다**_0"><div class="tree-item-inner heading-link" heading-name="**💬 우리가 욕했던 CORS는 사실 해결책이었다**"><strong>💬 우리가 욕했던 CORS는 사실 해결책이었다</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**🔍_브라우저의_CORS_기본_동작_살펴보기**_0" data-path="#**🔍_브라우저의_CORS_기본_동작_살펴보기**_0"><div class="tree-item-inner heading-link" heading-name="**🔍 브라우저의 CORS 기본 동작 살펴보기**"><strong>🔍 브라우저의 CORS 기본 동작 살펴보기</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**💬_결국_CORS_해결책은_서버의_허용이_필요**_0" data-path="#**💬_결국_CORS_해결책은_서버의_허용이_필요**_0"><div class="tree-item-inner heading-link" heading-name="**💬 결국 CORS 해결책은 서버의 허용이 필요**"><strong>💬 결국 CORS 해결책은 서버의 허용이 필요</strong></div></a><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**CORS_작동_방식_3가지_시나리오**_0" data-path="#**CORS_작동_방식_3가지_시나리오**_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="**CORS 작동 방식 3가지 시나리오**"><strong>CORS 작동 방식 3가지 시나리오</strong></div></a><div class="tree-item-children"><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**예비_요청_(Preflight_Request)**_0" data-path="#**예비_요청_(Preflight_Request)**_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="**예비 요청 (Preflight Request)**"><strong>예비 요청 (Preflight Request)</strong></div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**✔️_개발자_도구에서_예비_요청_확인하기**_0" data-path="#**✔️_개발자_도구에서_예비_요청_확인하기**_0"><div class="tree-item-inner heading-link" heading-name="**✔️ 개발자 도구에서 예비 요청 확인하기**"><strong>✔️ 개발자 도구에서 예비 요청 확인하기</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**⏰_예비_요청의_문제점과_캐싱**_0" data-path="#**⏰_예비_요청의_문제점과_캐싱**_0"><div class="tree-item-inner heading-link" heading-name="**⏰ 예비 요청의 문제점과 캐싱**"><strong>⏰ 예비 요청의 문제점과 캐싱</strong></div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**단순_요청_(Simple_Request)**_0" data-path="#**단순_요청_(Simple_Request)**_0"><div class="tree-item-inner heading-link" heading-name="**단순 요청 (Simple Request)**"><strong>단순 요청 (Simple Request)</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**인증된_요청_(Credentialed_Request)**_0" data-path="#**인증된_요청_(Credentialed_Request)**_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="**인증된 요청 (Credentialed Request)**"><strong>인증된 요청 (Credentialed Request)</strong></div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**1._클라이언트에서_인증_정보를_보내도록_설정하기**_0" data-path="#**1._클라이언트에서_인증_정보를_보내도록_설정하기**_0"><div class="tree-item-inner heading-link" heading-name="**1. 클라이언트에서 인증 정보를 보내도록 설정하기**"><strong>1. 클라이언트에서 인증 정보를 보내도록 설정하기</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**2\._서버에서_인증된_요청에_대한_헤더_설정하기**_0" data-path="#**2\._서버에서_인증된_요청에_대한_헤더_설정하기**_0"><div class="tree-item-inner heading-link" heading-name="**2\. 서버에서 인증된 요청에 대한 헤더 설정하기**"><strong>2. 서버에서 인증된 요청에 대한 헤더 설정하기</strong></div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**CORS_3가지_시나리오_작동_체험_사이트**_0" data-path="#**CORS_3가지_시나리오_작동_체험_사이트**_0"><div class="tree-item-inner heading-link" heading-name="**CORS 3가지 시나리오 작동 체험 사이트**"><strong>CORS 3가지 시나리오 작동 체험 사이트</strong></div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**CORS를_해결하는_방법_총정리**_🙌_0" data-path="#**CORS를_해결하는_방법_총정리**_🙌_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="**CORS를 해결하는 방법 총정리** 🙌"><strong>CORS를 해결하는 방법 총정리</strong> 🙌</div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**1._Chrome_확장_프로그램_이용**_0" data-path="#**1._Chrome_확장_프로그램_이용**_0"><div class="tree-item-inner heading-link" heading-name="**1. Chrome 확장 프로그램 이용**"><strong>1. Chrome 확장 프로그램 이용</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**2._프록시_사이트_이용하기**_0" data-path="#**2._프록시_사이트_이용하기**_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="**2. 프록시 사이트 이용하기**"><strong>2. 프록시 사이트 이용하기</strong></div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**heroku_프록시_서버**_0" data-path="#**heroku_프록시_서버**_0"><div class="tree-item-inner heading-link" heading-name="**heroku 프록시 서버**"><strong>heroku 프록시 서버</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**cors_proxy_app_프록시_서버**_0" data-path="#**cors_proxy_app_프록시_서버**_0"><div class="tree-item-inner heading-link" heading-name="**cors proxy app 프록시 서버**"><strong>cors proxy app 프록시 서버</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**cors.sh_프록시_서버**_0" data-path="#**cors.sh_프록시_서버**_0"><div class="tree-item-inner heading-link" heading-name="**cors.sh 프록시 서버**"><strong>cors.sh 프록시 서버</strong></div></a><div class="tree-item-children"></div></div></div></div><div class="tree-item mod-collapsible" data-depth="3"><a class="tree-item-self is-clickable mod-collapsible" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**3._서버에서_Access-Control-Allow-Origin_헤더_세팅하기**_0" data-path="#**3._서버에서_Access-Control-Allow-Origin_헤더_세팅하기**_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="**3. 서버에서 Access-Control-Allow-Origin 헤더 세팅하기**"><strong>3. 서버에서 Access-Control-Allow-Origin 헤더 세팅하기</strong></div></a><div class="tree-item-children"><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**Node.js_세팅**_0" data-path="#**Node.js_세팅**_0"><div class="tree-item-inner heading-link" heading-name="**Node.js 세팅**"><strong>Node.js 세팅</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**Express.js_**세팅****_0" data-path="#**Express.js_**세팅****_0"><div class="tree-item-inner heading-link" heading-name="**Express.js **세팅****"><strong>Express.js </strong>세팅****</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**JSP_/_Servlet_**세팅****_0" data-path="#**JSP_/_Servlet_**세팅****_0"><div class="tree-item-inner heading-link" heading-name="**JSP / Servlet **세팅****"><strong>JSP / Servlet </strong>세팅****</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**Spring_**세팅****_0" data-path="#**Spring_**세팅****_0"><div class="tree-item-inner heading-link" heading-name="**Spring **세팅****"><strong>Spring </strong>세팅****</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**Apache_**세팅****_0" data-path="#**Apache_**세팅****_0"><div class="tree-item-inner heading-link" heading-name="**Apache **세팅****"><strong>Apache </strong>세팅****</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**Tomcat**_0" data-path="#**Tomcat**_0"><div class="tree-item-inner heading-link" heading-name="**Tomcat**"><strong>Tomcat</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**Nginx**_0" data-path="#**Nginx**_0"><div class="tree-item-inner heading-link" heading-name="**Nginx**"><strong>Nginx</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**AWS_(S3_호스팅)**_0" data-path="#**AWS_(S3_호스팅)**_0"><div class="tree-item-inner heading-link" heading-name="**AWS (S3 호스팅)**"><strong>AWS (S3 호스팅)</strong></div></a><div class="tree-item-children"></div></div></div></div></div></div><div class="tree-item mod-collapsible" data-depth="2"><a class="tree-item-self is-clickable mod-collapsible" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**추가적으로_알아야_하는_CORS_사례**_0" data-path="#**추가적으로_알아야_하는_CORS_사례**_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="**추가적으로 알아야 하는 CORS 사례**"><strong>추가적으로 알아야 하는 CORS 사례</strong></div></a><div class="tree-item-children"><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**CORS의_보안_취약점_가이드**_0" data-path="#**CORS의_보안_취약점_가이드**_0"><div class="tree-item-inner heading-link" heading-name="**CORS의 보안 취약점 가이드**"><strong>CORS의 보안 취약점 가이드</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**Chorme_PNA_CORS_문제**_0" data-path="#**Chorme_PNA_CORS_문제**_0"><div class="tree-item-inner heading-link" heading-name="**Chorme PNA CORS 문제**"><strong>Chorme PNA CORS 문제</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-item-self is-clickable" href="600_tech-stack/javascript/악명-높은-cors-개념-&amp;-해결법-정리-끝판왕.html#**브라우저_Cache에_의한_CORS_문제**_0" data-path="#**브라우저_Cache에_의한_CORS_문제**_0"><div class="tree-item-inner heading-link" heading-name="**브라우저 Cache에 의한 CORS 문제**"><strong>브라우저 Cache에 의한 CORS 문제</strong></div></a><div class="tree-item-children"></div></div></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></div></body></html>