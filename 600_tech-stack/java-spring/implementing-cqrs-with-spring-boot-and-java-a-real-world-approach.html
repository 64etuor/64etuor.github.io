<!DOCTYPE html> <html lang="en"><head>
<title>Implementing CQRS with Spring Boot and Java: A Real-World Approach</title>
<base href="../..">
<meta name="pathname" content="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html">
<meta name="description" content="Command Query Responsibility Segregation (CQRS) is a powerful pattern in software architecture that separates read (query) and write (command) operations into distinct models. This pattern improves…">
<meta property="og:title" content="Implementing CQRS with Spring Boot and Java: A Real-World Approach">
<meta property="og:description" content="Command Query Responsibility Segregation (CQRS) is a powerful pattern in software architecture that separates read (query) and write (command) operations into distinct models. This pattern improves…">
<meta property="og:type" content="website">
<meta property="og:url" content="https://64etuor.github.io/600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html">
<meta property="og:image" content="https://miro.medium.com/v2/resize:fit:640/format:webp/1*l2EnJHWzITvj9KNAuzA8yw.png">
<meta name="author" content="[[Anil Goyal]]"></head><body class="publish css-settings-manager show-inline-title show-ribbon is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><meta property="og:site_name" content="Documents"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><meta charset="UTF-8"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://64etuor.github.io/site-lib/rss.xml"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-wasm-script" src="site-lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="site-lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.png"><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="stylesheet" href="site-lib/styles/theme.css"><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/supported-plugins.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:4px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#layout{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6):has(> :is(.math:not(.math-inline),table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const l=await fetch(e);if(!l.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await l.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let l=document.createRange().createContextualFragment(o),n=Array.from(l.children);for(let e of n)e?.classList?.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e?.classList?.remove("hide")}),10);t.before(l),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(l){let n=o[l],c=l+1;n?(n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(c),l<o.length&&n.addEventListener("load",(()=>e(c)))):l<o.length?e(c):t()}(0)}</script><div id="layout"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><div id="search-container"><div id="search-wrapper"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div aria-label="Clear search" id="search-clear-button"></div></div></div></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings allow-fold-lists show-indentation-guide show-properties" data-type="markdown"><style id="MJX-CHTML-styles">mjx-c.mjx-c3A::before{padding:.43em .278em 0 0;content:":"}mjx-c.mjx-c1D454.TEX-I::before{padding:.442em .477em .205em 0;content:"g"}mjx-c.mjx-c1D461.TEX-I::before{padding:.626em .361em .011em 0;content:"t"}mjx-c.mjx-c1D463.TEX-I::before{padding:.443em .485em .011em 0;content:"v"}mjx-c.mjx-c2C::before{padding:.121em .278em .194em 0;content:","}mjx-c.mjx-c2212::before{padding:.583em .778em .082em 0;content:"−"}mjx-c.mjx-c1D45D.TEX-I::before{padding:.442em .503em .194em 0;content:"p"}mjx-c.mjx-c1D453.TEX-I::before{padding:.705em .55em .205em 0;content:"f"}mjx-c.mjx-c1D466.TEX-I::before{padding:.442em .49em .205em 0;content:"y"}mjx-c.mjx-c28::before{padding:.75em .389em .25em 0;content:"("}mjx-c.mjx-c29::before{padding:.75em .389em .25em 0;content:")"}mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;font-size-adjust:none;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-mi{display:inline-block;text-align:left}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-mfrac{display:inline-block;text-align:left}mjx-frac{display:inline-block;vertical-align:.17em;padding:0 .22em}mjx-frac[type="d"]{vertical-align:.04em}mjx-frac[delims]{padding:0 .1em}mjx-frac[atop]{padding:0 .12em}mjx-frac[atop][delims]{padding:0}mjx-dtable{display:inline-table;width:100%}mjx-dtable>*{font-size:2000%}mjx-dbox{display:block;font-size:5%}mjx-num{display:block;text-align:center}mjx-den{display:block;text-align:center}mjx-mfrac[bevelled]>mjx-num{display:inline-block}mjx-mfrac[bevelled]>mjx-den{display:inline-block}mjx-den[align=right],mjx-num[align=right]{text-align:right}mjx-den[align=left],mjx-num[align=left]{text-align:left}mjx-nstrut{display:inline-block;height:.054em;width:0;vertical-align:-.054em}mjx-nstrut[type="d"]{height:.217em;vertical-align:-.217em}mjx-dstrut{display:inline-block;height:.505em;width:0}mjx-dstrut[type="d"]{height:.726em}mjx-line{display:block;box-sizing:border-box;min-height:1px;height:.06em;border-top:.06em solid;margin:.06em -.1em;overflow:hidden}mjx-line[type="d"]{margin:.18em -.1em}mjx-mrow{display:inline-block;text-align:left}mjx-mn{display:inline-block;text-align:left}mjx-mspace{display:inline-block;text-align:left}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("site-lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("site-lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("site-lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("site-lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("site-lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("site-lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("site-lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("site-lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("site-lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("site-lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("site-lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("site-lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("site-lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("site-lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("site-lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("site-lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("site-lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("site-lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("site-lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("site-lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("site-lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("site-lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c1D443.TEX-I::before{padding:.683em .751em 0 0;content:"P"}mjx-c.mjx-c1D45F.TEX-I::before{padding:.442em .451em .011em 0;content:"r"}mjx-c.mjx-c1D452.TEX-I::before{padding:.442em .466em .011em 0;content:"e"}mjx-c.mjx-c1D450.TEX-I::before{padding:.442em .433em .011em 0;content:"c"}mjx-c.mjx-c1D456.TEX-I::before{padding:.661em .345em .011em 0;content:"i"}mjx-c.mjx-c1D460.TEX-I::before{padding:.442em .469em .01em 0;content:"s"}mjx-c.mjx-c1D45C.TEX-I::before{padding:.441em .485em .011em 0;content:"o"}mjx-c.mjx-c1D45B.TEX-I::before{padding:.442em .6em .011em 0;content:"n"}mjx-c.mjx-c3D::before{padding:.583em .778em .082em 0;content:"="}mjx-c.mjx-c1D447.TEX-I::before{padding:.677em .704em 0 0;content:"T"}mjx-c.mjx-c1D439.TEX-I::before{padding:.68em .749em 0 0;content:"F"}mjx-c.mjx-c2B::before{padding:.583em .778em .082em 0;content:"+"}mjx-c.mjx-c1D445.TEX-I::before{padding:.683em .759em .021em 0;content:"R"}mjx-c.mjx-c1D44E.TEX-I::before{padding:.441em .529em .01em 0;content:"a"}mjx-c.mjx-c1D459.TEX-I::before{padding:.694em .298em .011em 0;content:"l"}mjx-c.mjx-c1D441.TEX-I::before{padding:.683em .888em 0 0;content:"N"}mjx-c.mjx-c31::before{padding:.666em .5em 0 0;content:"1"}mjx-c.mjx-c1D446.TEX-I::before{padding:.705em .645em .022em 0;content:"S"}mjx-c.mjx-c32::before{padding:.666em .5em 0 0;content:"2"}mjx-c.mjx-c2217::before{padding:.465em .5em 0 0;content:"∗"}</style><pre class="frontmatter language-yaml" tabindex="0" style="display: none;"><code class="language-yaml is-loaded"><span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">"Implementing CQRS with Spring Boot and Java: A Real-World Approach"</span>
<span class="token key atrule">source</span><span class="token punctuation">:</span> <span class="token string">"https://medium.com/@anil.goyal0057/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach-da037143850d"</span>
<span class="token key atrule">author</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">"[[Anil Goyal]]"</span>
<span class="token key atrule">published</span><span class="token punctuation">:</span> <span class="token datetime number">2024-11-27</span>
<span class="token key atrule">created</span><span class="token punctuation">:</span> <span class="token datetime number">2025-06-18</span>
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">"Command Query Responsibility Segregation (CQRS) is a powerful pattern in software architecture that separates read (query) and write (command) operations into distinct models. This pattern improves…"</span>
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">"clippings"</span></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="Implementing_CQRS_with_Spring_Boot_and_Java_A_Real-World_Approach_0">Implementing CQRS with Spring Boot and Java: A Real-World Approach</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-p"><p dir="auto"><a data-tooltip-position="top" aria-label="https://medium.com/sitemap/sitemap.xml" rel="noopener nofollow" class="external-link is-unresolved" href="https://medium.com/sitemap/sitemap.xml" target="_self">Sitemap</a></p></div><div class="el-p"><p dir="auto"><img src="https://miro.medium.com/v2/resize:fit:640/format:webp/1*l2EnJHWzITvj9KNAuzA8yw.png" referrerpolicy="no-referrer" target="_self" class="is-unresolved"></p></div><div class="el-h2"><h2 data-heading="Introduction" dir="auto" class="heading" id="Introduction_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Introduction</h2></div><div class="el-p"><p dir="auto">Command Query Responsibility Segregation (CQRS) is a powerful pattern in software architecture that separates read (query) and write (command) operations into distinct models. This pattern improves performance, scalability, and flexibility in systems with complex domains. In this blog post, we’ll explore CQRS in the context of a Spring Boot application, demonstrating how it can be implemented and discussing some real-world use cases.</p></div><div class="el-h2"><h2 data-heading="What is CQRS?" dir="auto" class="heading" id="What_is_CQRS?_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>What is CQRS?</h2></div><div class="el-p"><p dir="auto">CQRS is based on the idea that <strong>reads</strong> and <strong>writes</strong> are often optimized differently and can benefit from separate models and data storage mechanisms. Traditionally, most applications use a single model for both reading and writing data. However, as applications grow in complexity and scale, the need for separation becomes more apparent.</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><strong>Command Model (Write)</strong>: Handles operations that change the state of the system.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><strong>Query Model (Read)</strong>: Handles operations that retrieve data but do not alter the system’s state.</li>
</ul></div><div class="el-p"><p dir="auto">By separating these models, CQRS allows for more efficient and scalable systems.</p></div><div class="el-h2"><h2 data-heading="Why Use CQRS?" dir="auto" class="heading" id="Why_Use_CQRS?_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Why Use CQRS?</h2></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><strong>Scalability</strong>: The read and write operations can be scaled independently.</li>
<li data-line="1" dir="auto"><strong>Performance Optimization</strong>: You can optimize the query side for fast reads and the command side for efficient writes.</li>
<li data-line="2" dir="auto"><strong>Flexibility</strong>: With separate models, it’s easier to evolve the query model without affecting the command side.</li>
<li data-line="3" dir="auto"><strong>Complexity Handling</strong>: Helps in managing complex domains where business logic for reading and writing differs.</li>
</ol></div><div class="el-h2"><h2 data-heading="When to Use CQRS?" dir="auto" class="heading" id="When_to_Use_CQRS?_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>When to Use CQRS?</h2></div><div class="el-p"><p dir="auto">CQRS is beneficial in scenarios where:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span>There are <strong>complex queries</strong> and <strong>frequent updates</strong>.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span>The application experiences a <strong>high load</strong> and requires separate scaling for reads and writes.</li>
<li data-line="2" dir="auto"><span class="list-bullet"></span>The <strong>business logic</strong> for reading and writing differs significantly.</li>
</ul></div><div class="el-h2"><h2 data-heading="Separate models and data storage mechanisms" dir="auto" class="heading" id="Separate_models_and_data_storage_mechanisms_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Separate models and data storage mechanisms</h2></div><div class="el-p"><p dir="auto">When I say <strong>“separate models and data storage mechanisms”</strong> in the context of CQRS (Command Query Responsibility Segregation), I am referring to two key concepts:</p></div><div class="el-h2"><h2 data-heading="1\. Separate Models" dir="auto" class="heading" id="1\._Separate_Models_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>1. Separate Models</h2></div><div class="el-p"><p dir="auto">In the CQRS pattern, the <strong>command model</strong> and <strong>query model</strong> are separated into two different models to handle different concerns:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><strong>Command Model (Write Model)</strong>: This model is responsible for handling all operations that modify the state of the system (i.e., <strong>write operations</strong>). For example, in an e-commerce system, the command model handles operations such as placing an order, updating inventory, or processing payments. The business logic in this model is focused on <strong>validating and changing</strong> the state.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><strong>Query Model (Read Model)</strong>: This model is responsible for handling all operations that retrieve data but do not alter the state (i.e., <strong>read operations</strong>). In the e-commerce system, the query model is focused on efficiently retrieving data like fetching all orders for a customer, checking inventory, or listing available products. Since reading and querying data are different from updating it, the query model is often optimized for performance (e.g., using caching, denormalization, etc.).</li>
</ul></div><div class="el-p"><p dir="auto">In traditional CRUD (Create, Read, Update, Delete) applications, a single model is often used for both reading and writing data. In CQRS, however, the write operations (commands) and read operations (queries) are handled by <strong>separate models</strong>, each optimized for its specific purpose.</p></div><div class="el-h2"><h2 data-heading="2\. Separate Data Storage Mechanisms" dir="auto" class="heading" id="2\._Separate_Data_Storage_Mechanisms_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>2. Separate Data Storage Mechanisms</h2></div><div class="el-p"><p dir="auto">CQRS also introduces the concept of using <strong>different data storage mechanisms</strong> (or different databases) for the command model and query model. This means that the write side (command model) and the read side (query model) might use different types of storage systems, depending on their requirements.</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><strong>Write Storage (Command Side)</strong>: This data store is optimized for handling high-throughput writes and updates. It may support complex transactions or relationships between entities and ensure strong consistency and durability (ACID properties). In some cases, the command side may use a <strong>relational database</strong> like MySQL or PostgreSQL.</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><strong>Read Storage (Query Side)</strong>: The query model is focused on fast and efficient retrieval of data. It may use a <strong>denormalized schema</strong> (where data is duplicated for faster querying), <strong>NoSQL databases</strong> (like MongoDB, Cassandra, or Elasticsearch), or even an <strong>in-memory cache</strong> (like Redis) for fast access. In some cases, the query model might use <strong>read replicas</strong> or a <strong>separate database</strong> optimized for read-heavy operations.</li>
</ul></div><div class="el-h2"><h2 data-heading="Scenario: Power Grid Monitoring System" dir="auto" class="heading" id="Scenario_Power_Grid_Monitoring_System_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Scenario: Power Grid Monitoring System</h2></div><div class="el-p"><p dir="auto">In a power grid monitoring system, you have devices installed at various points in the grid (e.g., substations, transformers, power meters) that send telemetry data (such as voltage, current, power usage, faults, etc.). The system must:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><strong>Record real-time grid measurements</strong> (Command side).</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><strong>Provide real-time status updates and analytics</strong> on the grid (Query side).</li>
</ul></div><div class="el-p"><p dir="auto">For this, you can use CQRS, where:</p></div><div class="el-ul"><ul class="has-list-bullet">
<li data-line="0" dir="auto"><span class="list-bullet"></span><strong>Command Model</strong> handles writes (such as receiving new telemetry data or reporting faults).</li>
<li data-line="1" dir="auto"><span class="list-bullet"></span><strong>Query Model</strong> handles reads (such as retrieving real-time metrics or history of faults).</li>
</ul></div><div class="el-h2"><h2 data-heading="Command Service: Handling Grid Events" dir="auto" class="heading" id="Command_Service_Handling_Grid_Events_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Command Service: Handling Grid Events</h2></div><div class="el-p"><p dir="auto">Let’s define the <strong>Command Model</strong> for the power grid monitoring system. The grid devices send <strong>telemetry data</strong>, which is written into a <strong>Write Database</strong> (e.g., PostgreSQL) and publish to kafka topic as well.</p></div><div class="el-p"><p dir="auto"><strong>Grid Event Command Entity — for persisting in write db</strong></p></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">@Entity
public class GridEventCommand <span class="token punctuation">{</span>
    @Id
    @<span class="token function">GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> GenerationType<span class="token punctuation">.</span>IDENTITY<span class="token punctuation">)</span>
    private Long id<span class="token punctuation">;</span>
    private String deviceId<span class="token punctuation">;</span>
    private String eventType<span class="token punctuation">;</span>
    private String eventData<span class="token punctuation">;</span>
    private LocalDateTime timestamp<span class="token punctuation">;</span>

    <span class="token comment">// Getters and setters</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><strong>Grid Event Created Event — for publishing to kafka</strong></p></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">public class GridEventCreatedEvent <span class="token punctuation">{</span>
    private Long eventId<span class="token punctuation">;</span>
    private String deviceId<span class="token punctuation">;</span>
    private String eventType<span class="token punctuation">;</span>
    private String eventData<span class="token punctuation">;</span>
    private LocalDateTime timestamp<span class="token punctuation">;</span>

    public <span class="token function">GridEventCreatedEvent</span><span class="token punctuation">(</span>Long eventId<span class="token punctuation">,</span> String deviceId<span class="token punctuation">,</span> String eventType<span class="token punctuation">,</span> String eventData<span class="token punctuation">,</span> LocalDateTime timestamp<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        this<span class="token punctuation">.</span>eventId <span class="token operator">=</span> eventId<span class="token punctuation">;</span>
        this<span class="token punctuation">.</span>deviceId <span class="token operator">=</span> deviceId<span class="token punctuation">;</span>
        this<span class="token punctuation">.</span>eventType <span class="token operator">=</span> eventType<span class="token punctuation">;</span>
        this<span class="token punctuation">.</span>eventData <span class="token operator">=</span> eventData<span class="token punctuation">;</span>
        this<span class="token punctuation">.</span>timestamp <span class="token operator">=</span> timestamp<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// Getters and setters</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><strong>Command Service (Write Operations)</strong></p></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">@Service
public class CommandService <span class="token punctuation">{</span>

    @Autowired
    private GridEventCommandRepository gridEventCommandRepository<span class="token punctuation">;</span>

    @Autowired
    private KafkaTemplate<span class="token operator">&lt;</span>String<span class="token punctuation">,</span> GridEventCreatedEvent<span class="token operator">&gt;</span> kafkaTemplate<span class="token punctuation">;</span>

    private <span class="token keyword">static</span> final String TOPIC <span class="token operator">=</span> <span class="token string">"grid-events"</span><span class="token punctuation">;</span>

    @Transactional
    public GridEventCommand <span class="token function">createGridEvent</span><span class="token punctuation">(</span>GridEventCommand gridEventCommand<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Save the event to the write database</span>
        GridEventCommand savedEvent <span class="token operator">=</span> gridEventCommandRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>gridEventCommand<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Create an event and publish it to Kafka</span>
        GridEventCreatedEvent eventCreatedEvent <span class="token operator">=</span> new <span class="token function">GridEventCreatedEvent</span><span class="token punctuation">(</span>
                savedEvent<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                savedEvent<span class="token punctuation">.</span><span class="token function">getDeviceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                savedEvent<span class="token punctuation">.</span><span class="token function">getEventType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                savedEvent<span class="token punctuation">.</span><span class="token function">getEventData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                savedEvent<span class="token punctuation">.</span><span class="token function">getTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Publish the event to Kafka</span>
        kafkaTemplate<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span>TOPIC<span class="token punctuation">,</span> eventCreatedEvent<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> savedEvent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Query Service: Aggregating Grid Data" dir="auto" class="heading" id="Query_Service_Aggregating_Grid_Data_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Query Service: Aggregating Grid Data</h2></div><div class="el-p"><p dir="auto">In the Query Model, we will use <strong>Elasticsearch</strong> or a <strong>read replica</strong> of the relational database for fast retrieval of the grid status.</p></div><div class="el-p"><p dir="auto"><strong>Grid Event Query Entity (Read Model) — to read Grid Event from read db</strong></p></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">public class GridEventQuery <span class="token punctuation">{</span>
    private Long id<span class="token punctuation">;</span>
    private String deviceId<span class="token punctuation">;</span>
    private String eventType<span class="token punctuation">;</span>
    private String eventData<span class="token punctuation">;</span>
    private LocalDateTime timestamp<span class="token punctuation">;</span>

    <span class="token comment">// Getters and setters</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto"><strong>Query Service (Read Operations)</strong></p></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">@Service
public class QueryService <span class="token punctuation">{</span>

    @Autowired
    private GridEventQueryRepository gridEventQueryRepository<span class="token punctuation">;</span>

    public List<span class="token operator">&lt;</span>GridEventQuery<span class="token operator">&gt;</span> <span class="token function">getAllGridEvents</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> gridEventQueryRepository<span class="token punctuation">.</span><span class="token function">findAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    public GridEventQuery <span class="token function">getGridEventById</span><span class="token punctuation">(</span>Long id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> gridEventQueryRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">orElse</span><span class="token punctuation">(</span>null<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Kafka Consumer: Listening to Grid Events" dir="auto" class="heading" id="Kafka_Consumer_Listening_to_Grid_Events_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Kafka Consumer: Listening to Grid Events</h2></div><div class="el-p"><p dir="auto">The <strong>Kafka Consumer</strong> listens for the <code>**GridEventCreatedEvent**</code>, and updates the Query Database (e.g., Elasticsearch) based on this event.</p></div><div class="el-p"><p dir="auto"><strong>Kafka Listener (Consumer)</strong></p></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">@Service
public class GridEventListener <span class="token punctuation">{</span>

    @Autowired
    private GridEventQueryRepository gridEventQueryRepository<span class="token punctuation">;</span>

    @<span class="token function">KafkaListener</span><span class="token punctuation">(</span>topics <span class="token operator">=</span> <span class="token string">"grid-events"</span><span class="token punctuation">,</span> groupId <span class="token operator">=</span> <span class="token string">"grid-group"</span><span class="token punctuation">)</span>
    public <span class="token keyword">void</span> <span class="token function">handleGridEventCreatedEvent</span><span class="token punctuation">(</span>GridEventCreatedEvent event<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// On receiving the event, update the query database (e.g., Elasticsearch)</span>
        GridEventQuery gridEventQuery <span class="token operator">=</span> new <span class="token function">GridEventQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gridEventQuery<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getEventId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gridEventQuery<span class="token punctuation">.</span><span class="token function">setDeviceId</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getDeviceId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gridEventQuery<span class="token punctuation">.</span><span class="token function">setEventType</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getEventType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gridEventQuery<span class="token punctuation">.</span><span class="token function">setEventData</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getEventData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        gridEventQuery<span class="token punctuation">.</span><span class="token function">setTimestamp</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span><span class="token function">getTimestamp</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Save or update the event in the query database</span>
        gridEventQueryRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>gridEventQuery<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-h2"><h2 data-heading="Conclusion" dir="auto" class="heading" id="Conclusion_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Conclusion</h2></div><div class="el-p"><p dir="auto">In this <strong>power grid monitoring system</strong> example, we:</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto"><strong>Created a command model</strong> for grid events like device status, fault reports, and telemetry data.</li>
<li data-line="1" dir="auto"><strong>Published events</strong> to a Kafka topic to notify the system of new grid events.</li>
<li data-line="2" dir="auto"><strong>Set up a Kafka listener</strong> to consume those events and update the query model (query database or Elasticsearch) to keep it in sync.</li>
<li data-line="3" dir="auto"><strong>Tested the end-to-end flow</strong> to ensure the system works as expected.</li>
</ol></div><div class="el-p"><p dir="auto">This CQRS pattern allows the <strong>write side (command)</strong> to handle real-time data collection, while the <strong>read side (query)</strong> provides quick access to real-time grid monitoring and analytics, ensuring scalability and separation of concerns.</p></div><div class="el-h2"><h2 data-heading="Responses (1)" dir="auto" class="heading" id="Responses_(1)_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Responses (1)</h2></div><div class="el-p"><p dir="auto">Write a response<a data-tooltip-position="top" aria-label="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40anil.goyal0057%2Fimplementing-cqrs-with-spring-boot-and-java-a-real-world-approach-da037143850d&amp;source=---post_responses--da037143850d---------------------respond_sidebar------------------" rel="noopener nofollow" class="external-link is-unresolved" href="https://medium.com/m/signin?operation=register&amp;redirect=https%3A%2F%2Fmedium.com%2F%40anil.goyal0057%2Fimplementing-cqrs-with-spring-boot-and-java-a-real-world-approach-da037143850d&amp;source=---post_responses--da037143850d---------------------respond_sidebar------------------" target="_self">What are your thoughts?</a></p></div><div class="el-pre"><pre class="language-c" tabindex="0"><code data-line="0" class="language-c is-loaded">Some feedback to whomever it may be relevant<span class="token punctuation">.</span>Obviously this is an example<span class="token punctuation">,</span> but take care to not take this straight to production without considering resilience and failure scenarios<span class="token punctuation">.</span>The issue with two separate databases and some queue<span class="token operator">/</span>log<span class="token punctuation">,</span> and a…
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">11</p></div><div class="el-h2"><h2 data-heading="More from Anil Goyal" dir="auto" class="heading" id="More_from_Anil_Goyal_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>More from Anil Goyal</h2></div><div class="el-h2"><h2 data-heading="Recommended from Medium" dir="auto" class="heading" id="Recommended_from_Medium_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span>Recommended from Medium</h2></div><div class="el-p"><p dir="auto">[</p></div><div class="el-p"><p dir="auto">See more recommendations</p></div><div class="el-p"><p dir="auto">](<a rel="noopener nofollow" class="external-link is-unresolved" href="https://medium.com/?source=post_page---read_next_recirc--da037143850d---------------------------------------" target="_self">https://medium.com/?source=post_page---read_next_recirc--da037143850d---------------------------------------</a>)</p></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div class="graph-view-wrapper"><div class="feature-header"><div class="feature-title">Interactive Graph</div></div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<div class="graph-icon graph-global" role="button" aria-label="Global Graph" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-git-fork"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#Implementing_CQRS_with_Spring_Boot_and_Java_A_Real-World_Approach_0" data-path="#Implementing_CQRS_with_Spring_Boot_and_Java_A_Real-World_Approach_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="Implementing CQRS with Spring Boot and Java: A Real-World Approach">Implementing CQRS with Spring Boot and Java: A Real-World Approach</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#Introduction_0" data-path="#Introduction_0"><div class="tree-item-inner heading-link" heading-name="Introduction">Introduction</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#What_is_CQRS?_0" data-path="#What_is_CQRS?_0"><div class="tree-item-inner heading-link" heading-name="What is CQRS?">What is CQRS?</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#Why_Use_CQRS?_0" data-path="#Why_Use_CQRS?_0"><div class="tree-item-inner heading-link" heading-name="Why Use CQRS?">Why Use CQRS?</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#When_to_Use_CQRS?_0" data-path="#When_to_Use_CQRS?_0"><div class="tree-item-inner heading-link" heading-name="When to Use CQRS?">When to Use CQRS?</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#Separate_models_and_data_storage_mechanisms_0" data-path="#Separate_models_and_data_storage_mechanisms_0"><div class="tree-item-inner heading-link" heading-name="Separate models and data storage mechanisms">Separate models and data storage mechanisms</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#1\._Separate_Models_0" data-path="#1\._Separate_Models_0"><div class="tree-item-inner heading-link" heading-name="1\. Separate Models">1. Separate Models</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#2\._Separate_Data_Storage_Mechanisms_0" data-path="#2\._Separate_Data_Storage_Mechanisms_0"><div class="tree-item-inner heading-link" heading-name="2\. Separate Data Storage Mechanisms">2. Separate Data Storage Mechanisms</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#Scenario_Power_Grid_Monitoring_System_0" data-path="#Scenario_Power_Grid_Monitoring_System_0"><div class="tree-item-inner heading-link" heading-name="Scenario: Power Grid Monitoring System">Scenario: Power Grid Monitoring System</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#Command_Service_Handling_Grid_Events_0" data-path="#Command_Service_Handling_Grid_Events_0"><div class="tree-item-inner heading-link" heading-name="Command Service: Handling Grid Events">Command Service: Handling Grid Events</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#Query_Service_Aggregating_Grid_Data_0" data-path="#Query_Service_Aggregating_Grid_Data_0"><div class="tree-item-inner heading-link" heading-name="Query Service: Aggregating Grid Data">Query Service: Aggregating Grid Data</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#Kafka_Consumer_Listening_to_Grid_Events_0" data-path="#Kafka_Consumer_Listening_to_Grid_Events_0"><div class="tree-item-inner heading-link" heading-name="Kafka Consumer: Listening to Grid Events">Kafka Consumer: Listening to Grid Events</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#Conclusion_0" data-path="#Conclusion_0"><div class="tree-item-inner heading-link" heading-name="Conclusion">Conclusion</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#Responses_(1)_0" data-path="#Responses_(1)_0"><div class="tree-item-inner heading-link" heading-name="Responses (1)">Responses (1)</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#More_from_Anil_Goyal_0" data-path="#More_from_Anil_Goyal_0"><div class="tree-item-inner heading-link" heading-name="More from Anil Goyal">More from Anil Goyal</div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="600_tech-stack/java-spring/implementing-cqrs-with-spring-boot-and-java-a-real-world-approach.html#Recommended_from_Medium_0" data-path="#Recommended_from_Medium_0"><div class="tree-item-inner heading-link" heading-name="Recommended from Medium">Recommended from Medium</div></a><div class="tree-item-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></body></html>