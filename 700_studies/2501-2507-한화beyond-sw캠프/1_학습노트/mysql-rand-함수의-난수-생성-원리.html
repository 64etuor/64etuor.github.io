<!DOCTYPE html> <html lang="en"><head>
<title>MySQL RAND 함수의 난수 생성 원리</title>
<base href="../../..">
<meta name="pathname" content="700_studies/2501-2507-한화beyond-sw캠프/1_학습노트/mysql-rand-함수의-난수-생성-원리.html">
<meta name="description" content="MySQL 서버의 RAND 함수는 시드(Seed)값이 주어지지 않은 경우 0이상 1.0 미만의 부동소수값을 반환하는 함수이다. 어떠한 경우에도 랜덤 값은 1.0 이상으로 생성되지 않는다. MySQL 서버에는 내부적으로 난수를 생성하는 과정에 난수 생성 최대값 제한(1073741823)이 존재하는데, 이 최대값으로 시드값에 모듈러 연산을 수행하고 시드값이 32비트를 넘을 경우에는 2^32 모듈러 연산을 수행한다. 시드값이 크게 주어진다해도 결국 RAND 함수는 난수 생성 최대값 제한에 영향을 받는다. 시드값이 존재하는 경우와 그렇지 않은 경우를 나누어 좀 더 자세한 계산 과정을 살펴보겠다. Seed 값이 존재하는 경우 RAND 함수내에 인자로 주어진 시드값은 난수 구조체(rand structure)에 의해..">
<meta property="og:title" content="MySQL RAND 함수의 난수 생성 원리">
<meta property="og:description" content="MySQL 서버의 RAND 함수는 시드(Seed)값이 주어지지 않은 경우 0이상 1.0 미만의 부동소수값을 반환하는 함수이다. 어떠한 경우에도 랜덤 값은 1.0 이상으로 생성되지 않는다. MySQL 서버에는 내부적으로 난수를 생성하는 과정에 난수 생성 최대값 제한(1073741823)이 존재하는데, 이 최대값으로 시드값에 모듈러 연산을 수행하고 시드값이 32비트를 넘을 경우에는 2^32 모듈러 연산을 수행한다. 시드값이 크게 주어진다해도 결국 RAND 함수는 난수 생성 최대값 제한에 영향을 받는다. 시드값이 존재하는 경우와 그렇지 않은 경우를 나누어 좀 더 자세한 계산 과정을 살펴보겠다. Seed 값이 존재하는 경우 RAND 함수내에 인자로 주어진 시드값은 난수 구조체(rand structure)에 의해..">
<meta property="og:type" content="website">
<meta property="og:url" content="https://64etuor.github.io/700_studies/2501-2507-한화beyond-sw캠프/1_학습노트/mysql-rand-함수의-난수-생성-원리.html">
<meta property="og:image" content="undefined">
<meta name="author" content="[[SilverLee]]"></head><body class="publish css-settings-manager show-inline-title show-ribbon is-focused"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="parsed-feature-container" style="display: contents;"><link itemprop="include" href="site-lib/html/custom-head-content-content.html"></div><meta property="og:site_name" content="Documents"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0"><meta charset="UTF-8"><link rel="alternate" type="application/rss+xml" title="RSS Feed" href="https://64etuor.github.io/site-lib/rss.xml"><script async="" id="webpage-script" src="site-lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-wasm-script" src="site-lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="site-lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="site-lib/media/favicon.png"><link rel="stylesheet" href="site-lib/styles/obsidian.css"><link rel="stylesheet" href="site-lib/styles/theme.css"><link rel="preload" href="site-lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="site-lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/supported-plugins.css"></noscript><link rel="preload" href="site-lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="site-lib/styles/main-styles.css"></noscript><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-vertical-spacing:1.3em;--sidebar-margin:12px}:root{background-color:#202124}.sidebar{height:100%;font-size:14px;z-index:10;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));position:relative;overflow:hidden;overflow:clip;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}#left-sidebar{left:0}#right-sidebar{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}.sidebar.floating{position:absolute}.sidebar .leaf-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .leaf-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}#left-sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}#right-sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar #left-sidebar-content,.sidebar #right-sidebar-content{contain:none!important;container-type:normal!important;animation:none!important}.sidebar:has(.leaf-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}#left-sidebar .sidebar-topbar{left:0;flex-direction:row}#right-sidebar .sidebar-topbar{right:0;flex-direction:row-reverse}#left-sidebar .topbar-content{margin-right:calc(2.3em + var(--sidebar-margin));flex-direction:row}#right-sidebar .topbar-content{margin-left:calc(2.3em + var(--sidebar-margin));flex-direction:row-reverse}.topbar-content{overflow:hidden visible;overflow:clip visible;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:2px!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}#left-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}#right-sidebar .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.feature-title{margin-left:4px;text-transform:uppercase;letter-spacing:.06em;margin-top:.75em;margin-bottom:.75em}.feature-header{display:flex;align-items:center;padding-top:0;font-size:1em;padding-left:0}body.floating-sidebars .sidebar{position:absolute}body{transition:background-color var(--color-fade-speed) ease-in-out}#layout{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}#center-content{flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0!important;transition:opacity .2s ease-in-out;pointer-events:none}#center-content>.obsidian-document{padding-left:2em;padding-right:1em;margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}body #center-content>.obsidian-document>.markdown-preview-sizer{padding-bottom:80vh;width:100%;max-width:var(--line-width);flex-basis:var(--line-width);transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document>div{width:100%!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}#center-content>.obsidian-document:not([data-type=markdown]).embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}#center-content>.obsidian-document:not([data-type=markdown]).embed>*{max-width:100%;max-height:100%;object-fit:contain}:not(h1,h2,h3,h4,h5,h6):has(> :is(.math:not(.math-inline),table)){overflow-x:auto!important}#center-content>.obsidian-document:not([data-type=markdown]){overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.obsidian-document[data-type=attachment]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;width:100%}.obsidian-document[data-type=attachment]>*{outline:0;border:none;box-shadow:none}.obsidian-document[data-type=attachment] :is(img){max-width:90%;max-height:90%;object-fit:contain}.obsidian-document[data-type=attachment]>:is(audio){width:100%;max-width:min(90%,var(--line-width))}.obsidian-document[data-type=attachment]>:is(embed,iframe,video){width:100%;height:100%;max-width:100%;max-height:100%;object-fit:contain}.canvas-wrapper>:is(.header,.footer){z-index:100;position:absolute;display:flex;justify-content:center;flex-direction:column;width:100%;align-items:center}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){let e=document.querySelectorAll("link[itemprop='include']");for(const t of e){let e=t.getAttribute("href");try{let o="";if(e.startsWith("https:")||e.startsWith("http:")||"file:"!=window.location.protocol){const l=await fetch(e);if(!l.ok){console.log("Could not include file: "+e),t?.remove();continue}o=await l.text()}else{const t=document.getElementById(btoa(encodeURI(e)));if(t){const e=JSON.parse(decodeURI(atob(t.getAttribute("value")??"")));o=e?.data??""}}let l=document.createRange().createContextualFragment(o),n=Array.from(l.children);for(let e of n)e?.classList?.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e?.classList?.remove("hide")}),10);t.before(l),t.remove(),console.log("Included text: "+o),console.log("Included file: "+e)}catch(o){t?.remove(),console.log("Could not include file: "+e,o);continue}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script")));!function e(l){let n=o[l],c=l+1;n?(n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(c),l<o.length&&n.addEventListener("load",(()=>e(c)))):l<o.length?e(c):t()}(0)}</script><div id="layout"><div id="left-content" class="leaf" style="--sidebar-width: var(--sidebar-width-left);"><div id="left-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><div id="search-container"><div id="search-wrapper"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div aria-label="Clear search" id="search-clear-button"></div></div></div></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="left-sidebar-content" class="leaf-content"><link itemprop="include" href="site-lib/html/file-tree-content.html"></div></div><script defer="">let ls = document.querySelector("#left-sidebar"); ls.classList.toggle("is-collapsed", window.innerWidth < 768); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div></div><div id="center-content" class="leaf"><div class="obsidian-document markdown-preview-view markdown-rendered node-insert-event is-readable-line-width allow-fold-headings allow-fold-lists show-indentation-guide show-properties" data-type="markdown"><style id="MJX-CHTML-styles"></style><pre class="frontmatter language-yaml" tabindex="0" style="display: none;"><code class="language-yaml is-loaded"><span class="token key atrule">title</span><span class="token punctuation">:</span> <span class="token string">"MySQL RAND 함수의 난수 생성 원리"</span>
<span class="token key atrule">source</span><span class="token punctuation">:</span> <span class="token string">"https://mysqlinternal.tistory.com/5"</span>
<span class="token key atrule">author</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">"[[SilverLee]]"</span>
<span class="token key atrule">published</span><span class="token punctuation">:</span> <span class="token datetime number">2023-08-20</span>
<span class="token key atrule">created</span><span class="token punctuation">:</span> <span class="token datetime number">2025-02-03</span>
<span class="token key atrule">description</span><span class="token punctuation">:</span> <span class="token string">"MySQL 서버의 RAND 함수는 시드(Seed)값이 주어지지 않은 경우 0이상 1.0 미만의 부동소수값을 반환하는 함수이다. 어떠한 경우에도 랜덤 값은 1.0 이상으로 생성되지 않는다. MySQL 서버에는 내부적으로 난수를 생성하는 과정에 난수 생성 최대값 제한(1073741823)이 존재하는데, 이 최대값으로 시드값에 모듈러 연산을 수행하고 시드값이 32비트를 넘을 경우에는 2^32 모듈러 연산을 수행한다. 시드값이 크게 주어진다해도 결국 RAND 함수는 난수 생성 최대값 제한에 영향을 받는다. 시드값이 존재하는 경우와 그렇지 않은 경우를 나누어 좀 더 자세한 계산 과정을 살펴보겠다. Seed 값이 존재하는 경우 RAND 함수내에 인자로 주어진 시드값은 난수 구조체(rand structure)에 의해.."</span>
<span class="token key atrule">tags</span><span class="token punctuation">:</span>
  <span class="token punctuation">-</span> <span class="token string">"clippings"</span></code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre><div class="markdown-preview-sizer markdown-preview-section"><div class="header"><h1 class="page-title heading inline-title" id="MySQL_RAND_함수의_난수_생성_원리_0">MySQL RAND 함수의 난수 생성 원리</h1><div class="data-bar"></div></div><div class="markdown-preview-pusher" style="width: 1px; height: 0.1px; margin-bottom: 0px;"></div><div class="el-p"><p dir="auto">MySQL 서버의 RAND 함수는 시드(Seed)값이 주어지지 않은 경우 0이상 1.0 미만의 부동소수값을 반환하는 함수이다. 어떠한 경우에도 랜덤 값은 1.0 이상으로 생성되지 않는다.</p></div><div class="el-p"><p dir="auto">MySQL 서버에는 내부적으로 난수를 생성하는 과정에 난수 생성 최대값 제한(1073741823)이 존재하는데, 이 최대값으로 시드값에 모듈러 연산을 수행하고 시드값이 32비트를 넘을 경우에는 2^32 모듈러 연산을 수행한다. 시드값이 크게 주어진다해도 결국 RAND 함수는 난수 생성 최대값 제한에 영향을 받는다.<br>
시드값이 존재하는 경우와 그렇지 않은 경우를 나누어 좀 더 자세한 계산 과정을 살펴보겠다.</p></div><div class="el-h2"><h2 data-heading="**Seed 값이 존재하는 경우**" dir="auto" class="heading" id="**Seed_값이_존재하는_경우**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>Seed 값이 존재하는 경우</strong></h2></div><div class="el-p"><p dir="auto">RAND 함수내에 인자로 주어진 시드값은 난수 구조체(rand structure)에 의해 계산되고 관리된다.  </p></div><div class="el-p"><p dir="auto">&nbsp;</p></div><div class="el-pre"><pre class="language-sql" tabindex="0"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> RAND<span class="token punctuation">(</span><span class="token number">123.11</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">&nbsp;<br>
위와 같이 시드값으로 123.11이 전달되면 RAND 함수에 의한 랜덤값은 다음과 같은 과정을 거쳐 계산된다.  </p></div><div class="el-p"><p dir="auto">&nbsp;</p></div><div class="el-ol"><ol>
<li data-line="0" dir="auto">item_func.cc:<strong>Item_func_rand::seed_random</strong>  </li>
</ol></div><div class="el-p"><p dir="auto">&nbsp;</p></div><div class="el-pre"><pre class="language-cpp" tabindex="0"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">void</span> <span class="token class-name">Item_func_rand</span><span class="token double-colon punctuation">::</span><span class="token function">seed_random</span><span class="token punctuation">(</span>Item <span class="token operator">*</span>arg<span class="token punctuation">)</span> <span class="token punctuation">{</span>          args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> is a constant<span class="token punctuation">.</span>  <span class="token operator">*</span><span class="token operator">/</span>  <span class="token keyword">const</span> uint32 tmp <span class="token operator">=</span> <span class="token punctuation">(</span>uint32<span class="token punctuation">)</span>arg<span class="token operator">-&gt;</span><span class="token function">val_int</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token function">randominit</span><span class="token punctuation">(</span>m_rand<span class="token punctuation">,</span> <span class="token punctuation">(</span>uint32<span class="token punctuation">)</span><span class="token punctuation">(</span>tmp <span class="token operator">*</span> <span class="token number">0x10001L</span> <span class="token operator">+</span> <span class="token number">55555555L</span><span class="token punctuation">)</span><span class="token punctuation">,</span>             <span class="token punctuation">(</span>uint32<span class="token punctuation">)</span><span class="token punctuation">(</span>tmp <span class="token operator">*</span> <span class="token number">0x10000001L</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">&nbsp;<br>
<strong>Line 6</strong></p></div><div class="el-p"><p dir="auto">- tmp: <strong>123</strong><br>
(부호없는 양의 정수로 변환하여 tmp 변수에 할당)  </p></div><div class="el-p"><p dir="auto"><strong>Line 7</strong><br>
- m_rand: <strong>rand_struct 타입의 포인터</strong><br>
<span class="dataview inline-field"><span class="dataview inline-field-standalone-value" id="dataview-inline-field-0"><span>fix_fields에서 메모리 할당됨. 구조체 정의는 item_func.h 참조</span></span></span><br>
- (uint32)(tmp * 0x10001L + 55555555L): <strong>63616606</strong><br>
(seed 123에 0x10001을 곱하고 55555555를 더하는 것은 난수 생성 알고리즘의 일부로 보임)<br>
- (uint32)(tmp * 0x10000001L): <strong>2952790139</strong><br>
- randominit: <strong>난수 생성 초기화</strong>  </p></div><div class="el-p"><p dir="auto">→ 시드값 123.11을 32비트의 부호없는 양의 정수로 변환한 뒤, 계산식을 다르게 적용한 2개의 시드값을 난수 생성 초기화 함수로 전달한다. 64비트 정수로 표현할 수 있는 값을 초과하여 시드값을 입력하는 경우 해당 값은 64비트 최대 값(slient overflow)으로 래핑된다.  </p></div><div class="el-p"><p dir="auto">&nbsp;</p></div><div class="el-ol"><ol start="2">
<li data-line="0" dir="auto">password.cc:<strong>randominit</strong>  </li>
</ol></div><div class="el-p"><p dir="auto">&nbsp;</p></div><div class="el-pre"><pre class="language-cpp" tabindex="0"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">void</span> <span class="token function">randominit</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">rand_struct</span> <span class="token operator">*</span>rand_st<span class="token punctuation">,</span> ulong seed1<span class="token punctuation">,</span>                ulong seed2<span class="token punctuation">)</span> <span class="token punctuation">{</span>   rand_st<span class="token operator">-&gt;</span>max_value <span class="token operator">=</span> <span class="token number">0x3FFFFFFFL</span><span class="token punctuation">;</span>  rand_st<span class="token operator">-&gt;</span>max_value_dbl <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>rand_st<span class="token operator">-&gt;</span>max_value<span class="token punctuation">;</span>  rand_st<span class="token operator">-&gt;</span>seed1 <span class="token operator">=</span> seed1 <span class="token operator">%</span> rand_st<span class="token operator">-&gt;</span>max_value<span class="token punctuation">;</span>  rand_st<span class="token operator">-&gt;</span>seed2 <span class="token operator">=</span> seed2 <span class="token operator">%</span> rand_st<span class="token operator">-&gt;</span>max_value<span class="token punctuation">;</span><span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">&nbsp;<br>
<strong>Line 1</strong></p></div><div class="el-p"><p dir="auto">- rand_st: <strong>rand_st를 통해 m_rand가 가리키는 난수 구조체를 초기화</strong>  </p></div><div class="el-p"><p dir="auto"><strong>Line 3</strong><br>
- rand_st-&gt;max_value: <strong>1073741823 (2^30-1)</strong><br>
(난수 구조체의 최대값 제한 설정)  </p></div><div class="el-p"><p dir="auto"><strong>Line 4</strong><br>
- rand_st-&gt;max_value_dbl: <strong>1073741823</strong><br>
(난수 최대값을 double형으로 변환하여 저장)  </p></div><div class="el-p"><p dir="auto"><strong>Line 5, 6</strong><br>
- rand_st-&gt;seed1: <strong>63616606 % 1073741823 = 63616606</strong><br>
- rand_st-&gt;seed2: <strong>2952790139 % 1073741823 = 805306493</strong>  </p></div><div class="el-p"><p dir="auto">→ random 구조체의 시드값과 난수 생성 최대 값을 초기화한다. 초기화된 값은 실제 난수 생성 시에 사용된다.  </p></div><div class="el-p"><p dir="auto">&nbsp;</p></div><div class="el-ol"><ol start="3">
<li data-line="0" dir="auto">item_func.cc:<strong>Item_func_rand::var_real</strong>  </li>
</ol></div><div class="el-p"><p dir="auto">&nbsp;</p></div><div class="el-pre"><pre class="language-cpp" tabindex="0"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">double</span> <span class="token class-name">Item_func_rand</span><span class="token double-colon punctuation">::</span><span class="token function">val_real</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>  <span class="token function">assert</span><span class="token punctuation">(</span>fixed<span class="token punctuation">)</span><span class="token punctuation">;</span>  rand_struct <span class="token operator">*</span>rand<span class="token punctuation">;</span>  <span class="token keyword">if</span> <span class="token punctuation">(</span>arg_count <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">-&gt;</span><span class="token function">const_for_execution</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>      <span class="token function">seed_random</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>first_eval<span class="token punctuation">)</span> <span class="token punctuation">{</span>              Constantness of args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> may be set during <span class="token class-name">JOIN</span><span class="token double-colon punctuation">::</span><span class="token function">optimize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token keyword">if</span> arg<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>        is a field item of <span class="token string">"constant"</span> table<span class="token punctuation">.</span> Thus<span class="token punctuation">,</span> we have to evaluate        <span class="token function">seed_random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">for</span> constant arg there but <span class="token operator">not</span> at the fix_fields method<span class="token punctuation">.</span>      <span class="token operator">*</span><span class="token operator">/</span>      first_eval <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>      <span class="token function">seed_random</span><span class="token punctuation">(</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token punctuation">}</span>    rand <span class="token operator">=</span> m_rand<span class="token punctuation">;</span>  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>          Save the seed only the first time <span class="token function">RAND</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is used in the query      Once events are forwarded rather than recreated<span class="token punctuation">,</span>      the following can be skipped <span class="token keyword">if</span> inside the slave thread    <span class="token operator">*</span><span class="token operator">/</span>    THD <span class="token operator">*</span><span class="token keyword">const</span> thd <span class="token operator">=</span> current_thd<span class="token punctuation">;</span>    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>thd<span class="token operator">-&gt;</span>rand_used<span class="token punctuation">)</span> <span class="token punctuation">{</span>      thd<span class="token operator">-&gt;</span>rand_used <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>      thd<span class="token operator">-&gt;</span>rand_saved_seed1 <span class="token operator">=</span> thd<span class="token operator">-&gt;</span>rand<span class="token punctuation">.</span>seed1<span class="token punctuation">;</span>      thd<span class="token operator">-&gt;</span>rand_saved_seed2 <span class="token operator">=</span> thd<span class="token operator">-&gt;</span>rand<span class="token punctuation">.</span>seed2<span class="token punctuation">;</span>    <span class="token punctuation">}</span>    rand <span class="token operator">=</span> <span class="token operator">&amp;</span>thd<span class="token operator">-&gt;</span>rand<span class="token punctuation">;</span>  <span class="token punctuation">}</span>  <span class="token keyword">return</span> <span class="token function">my_rnd</span><span class="token punctuation">(</span>rand<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">&nbsp;<br>
<strong>Line 16</strong></p></div><div class="el-p"><p dir="auto">- rand: <strong>m_rand가 가리키는 구조체를 3번째 줄에서 정의한 rand 구조체 포인터로 전달</strong>  </p></div><div class="el-p"><p dir="auto"><strong>Line 31</strong><br>
- my_rnd(rand): <strong>my_rnd 함수에 rand 포인터를 인자로 전달</strong>  </p></div><div class="el-p"><p dir="auto">→ my_rnd 함수를 호출하여 난수를 생성한다.  </p></div><div class="el-p"><p dir="auto">&nbsp;</p></div><div class="el-ol"><ol start="4">
<li data-line="0" dir="auto">my_rnd.cc:<strong>my_rnd</strong>  </li>
</ol></div><div class="el-p"><p dir="auto">&nbsp;</p></div><div class="el-pre"><pre class="language-cpp" tabindex="0"><code data-line="0" class="language-cpp is-loaded"><span class="token keyword">double</span> <span class="token function">my_rnd</span><span class="token punctuation">(</span><span class="token keyword">struct</span> <span class="token class-name">rand_struct</span> <span class="token operator">*</span>rand_st<span class="token punctuation">)</span> <span class="token punctuation">{</span>  rand_st<span class="token operator">-&gt;</span>seed1 <span class="token operator">=</span> <span class="token punctuation">(</span>rand_st<span class="token operator">-&gt;</span>seed1 <span class="token operator">*</span> <span class="token number">3</span> <span class="token operator">+</span> rand_st<span class="token operator">-&gt;</span>seed2<span class="token punctuation">)</span> <span class="token operator">%</span> rand_st<span class="token operator">-&gt;</span>max_value<span class="token punctuation">;</span>  rand_st<span class="token operator">-&gt;</span>seed2 <span class="token operator">=</span> <span class="token punctuation">(</span>rand_st<span class="token operator">-&gt;</span>seed1 <span class="token operator">+</span> rand_st<span class="token operator">-&gt;</span>seed2 <span class="token operator">+</span> <span class="token number">33</span><span class="token punctuation">)</span> <span class="token operator">%</span> rand_st<span class="token operator">-&gt;</span>max_value<span class="token punctuation">;</span>  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword">double</span><span class="token punctuation">)</span>rand_st<span class="token operator">-&gt;</span>seed1<span class="token punctuation">)</span> <span class="token operator">/</span> rand_st<span class="token operator">-&gt;</span>max_value_dbl<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">&nbsp;<br>
<strong>Line 2, 3</strong></p></div><div class="el-p"><p dir="auto">- rand_st-&gt;seed1: <strong>(63616606 * 3 + 805306493) % 1073741823 = 996156311</strong><br>
- rand_st-&gt;seed2: <strong>(996156311 + 805306493 + 33) % 1073741823 = 727721014</strong>  </p></div><div class="el-p"><p dir="auto"><strong>Line 4</strong><br>
- return: <strong>996156311 / 1073741823 = 0.92774286114400517 ≒</strong> <strong>0.9277428611440052</strong>  </p></div><div class="el-p"><p dir="auto">&nbsp;</p></div><div class="el-pre"><pre class="language-sql" tabindex="0"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> RAND<span class="token punctuation">(</span><span class="token number">123.11</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token operator">+</span><span class="token operator">|</span> RAND<span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>          <span class="token operator">|</span><span class="token operator">+</span><span class="token operator">|</span> <span class="token number">0.9277428611440052</span> <span class="token operator">|</span><span class="token operator">+</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">&nbsp;<br>
→ 첫 번째 시드값과 두 번째 시드값을 사용하여 최종적인 난수 값 1개를 생성한다. mod로 계산된 결과값은 오른쪽 피연산자보다 큰 수가 될 수 없기 때문에 난수 생성에 사용되는 seed1과 seed2 값은 난수 최대값보다 작을 수밖에 없다. 또한 이 시드값을 난수 최대값으로(즉, 작은 값을 큰 값으로) 나누기 때문에 1 이상의 값은 절대 나올 수 없다.</p></div><div class="el-p"><p dir="auto">그러므로, 난수 값은 0 &lt;= a &lt; 1 범위의 값으로만 생성된다.</p></div><div class="el-h2"><h2 data-heading="**Seed 값이 존재하지 않는 경우**" dir="auto" class="heading" id="**Seed_값이_존재하지_않는_경우**_0"><span class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></span><strong>Seed 값이 존재하지 않는 경우</strong></h2></div><div class="el-p"><p dir="auto">시드값을 전달하지 않는 경우에도 동작 방식은 비슷하지만 약간의 차이가 있다.  </p></div><div class="el-p"><p dir="auto">&nbsp;</p></div><div class="el-pre"><pre class="language-sql" tabindex="0"><code data-line="0" class="language-sql is-loaded"><span class="token keyword">SELECT</span> RAND<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code><button class="copy-code-button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-copy"><rect x="8" y="8" width="14" height="14" rx="2" ry="2"></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></pre></div><div class="el-p"><p dir="auto">&nbsp;<br>
<strong>&lt;최초 수행 시&gt;</strong></p></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div class="footer"><div class="data-bar"></div></div></div></div></div><div id="right-content" class="leaf" style="--sidebar-width: var(--sidebar-width-right);"><div id="right-sidebar" class="sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme-toggle-input" id=""><input class="theme-toggle-input" type="checkbox" id="theme-toggle-input"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content-wrapper"><div id="right-sidebar-content" class="leaf-content"><div class="graph-view-wrapper"><div class="feature-header"><div class="feature-title">Interactive Graph</div></div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<div class="graph-icon graph-global" role="button" aria-label="Global Graph" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon lucide-git-fork"><circle cx="12" cy="18" r="3"></circle><circle cx="6" cy="6" r="3"></circle><circle cx="18" cy="6" r="3"></circle><path d="M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9"></path><path d="M12 12v3"></path></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div id="outline" class=" tree-container"><div class="feature-header"><div class="feature-title">Table Of Contents</div><button class="clickable-icon nav-action-button tree-collapse-all" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-item mod-collapsible" data-depth="1"><a class="tree-item-self is-clickable mod-collapsible" href="700_studies/2501-2507-한화beyond-sw캠프/1_학습노트/mysql-rand-함수의-난수-생성-원리.html#MySQL_RAND_함수의_난수_생성_원리_0" data-path="#MySQL_RAND_함수의_난수_생성_원리_0"><div class="tree-item-icon collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><div class="tree-item-inner heading-link" heading-name="MySQL RAND 함수의 난수 생성 원리">MySQL RAND 함수의 난수 생성 원리</div></a><div class="tree-item-children"><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="700_studies/2501-2507-한화beyond-sw캠프/1_학습노트/mysql-rand-함수의-난수-생성-원리.html#**Seed_값이_존재하는_경우**_0" data-path="#**Seed_값이_존재하는_경우**_0"><div class="tree-item-inner heading-link" heading-name="**Seed 값이 존재하는 경우**"><strong>Seed 값이 존재하는 경우</strong></div></a><div class="tree-item-children"></div></div><div class="tree-item" data-depth="2"><a class="tree-item-self is-clickable" href="700_studies/2501-2507-한화beyond-sw캠프/1_학습노트/mysql-rand-함수의-난수-생성-원리.html#**Seed_값이_존재하지_않는_경우**_0" data-path="#**Seed_값이_존재하지_않는_경우**_0"><div class="tree-item-inner heading-link" heading-name="**Seed 값이 존재하지 않는 경우**"><strong>Seed 값이 존재하지 않는 경우</strong></div></a><div class="tree-item-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector("#right-sidebar"); rs.classList.toggle("is-collapsed", window.innerWidth < 768); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></div></body></html>